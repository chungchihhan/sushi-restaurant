{"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/controllers/user.ts":{"path":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/controllers/user.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":224}},"16":{"start":{"line":16,"column":23},"end":{"line":16,"column":63}},"17":{"start":{"line":17,"column":23},"end":{"line":17,"column":59}},"18":{"start":{"line":18,"column":17},"end":{"line":18,"column":43}},"19":{"start":{"line":19,"column":26},"end":{"line":19,"column":54}},"20":{"start":{"line":20,"column":31},"end":{"line":20,"column":64}},"21":{"start":{"line":21,"column":27},"end":{"line":21,"column":56}},"22":{"start":{"line":22,"column":26},"end":{"line":22,"column":54}},"23":{"start":{"line":23,"column":26},"end":{"line":23,"column":54}},"24":{"start":{"line":24,"column":17},"end":{"line":24,"column":60}},"25":{"start":{"line":25,"column":18},"end":{"line":25,"column":63}},"26":{"start":{"line":26,"column":22},"end":{"line":26,"column":75}},"27":{"start":{"line":27,"column":17},"end":{"line":27,"column":60}},"28":{"start":{"line":28,"column":17},"end":{"line":28,"column":60}},"29":{"start":{"line":29,"column":17},"end":{"line":37,"column":2}},"30":{"start":{"line":29,"column":29},"end":{"line":37,"column":2}},"31":{"start":{"line":30,"column":4},"end":{"line":36,"column":5}},"32":{"start":{"line":31,"column":24},"end":{"line":31,"column":48}},"33":{"start":{"line":32,"column":8},"end":{"line":32,"column":45}},"34":{"start":{"line":35,"column":8},"end":{"line":35,"column":52}},"35":{"start":{"line":38,"column":0},"end":{"line":38,"column":28}},"36":{"start":{"line":39,"column":16},"end":{"line":51,"column":2}},"37":{"start":{"line":39,"column":30},"end":{"line":51,"column":2}},"38":{"start":{"line":40,"column":4},"end":{"line":50,"column":5}},"39":{"start":{"line":41,"column":23},"end":{"line":41,"column":33}},"40":{"start":{"line":42,"column":23},"end":{"line":42,"column":50}},"41":{"start":{"line":43,"column":8},"end":{"line":45,"column":9}},"42":{"start":{"line":44,"column":12},"end":{"line":44,"column":69}},"43":{"start":{"line":46,"column":8},"end":{"line":46,"column":44}},"44":{"start":{"line":49,"column":8},"end":{"line":49,"column":52}},"45":{"start":{"line":52,"column":0},"end":{"line":52,"column":26}},"46":{"start":{"line":53,"column":19},"end":{"line":79,"column":2}},"47":{"start":{"line":53,"column":33},"end":{"line":79,"column":2}},"48":{"start":{"line":54,"column":4},"end":{"line":78,"column":5}},"49":{"start":{"line":55,"column":78},"end":{"line":55,"column":86}},"50":{"start":{"line":57,"column":21},"end":{"line":57,"column":58}},"51":{"start":{"line":58,"column":8},"end":{"line":60,"column":9}},"52":{"start":{"line":59,"column":12},"end":{"line":59,"column":74}},"53":{"start":{"line":61,"column":24},"end":{"line":72,"column":9}},"54":{"start":{"line":73,"column":24},"end":{"line":73,"column":54}},"55":{"start":{"line":74,"column":8},"end":{"line":74,"column":56}},"56":{"start":{"line":77,"column":8},"end":{"line":77,"column":52}},"57":{"start":{"line":80,"column":0},"end":{"line":80,"column":32}},"58":{"start":{"line":81,"column":19},"end":{"line":98,"column":2}},"59":{"start":{"line":81,"column":33},"end":{"line":98,"column":2}},"60":{"start":{"line":82,"column":4},"end":{"line":97,"column":5}},"61":{"start":{"line":83,"column":23},"end":{"line":83,"column":33}},"62":{"start":{"line":84,"column":24},"end":{"line":84,"column":51}},"63":{"start":{"line":85,"column":8},"end":{"line":87,"column":9}},"64":{"start":{"line":86,"column":12},"end":{"line":86,"column":69}},"65":{"start":{"line":88,"column":24},"end":{"line":88,"column":32}},"66":{"start":{"line":89,"column":23},"end":{"line":89,"column":61}},"67":{"start":{"line":90,"column":8},"end":{"line":92,"column":9}},"68":{"start":{"line":91,"column":12},"end":{"line":91,"column":67}},"69":{"start":{"line":93,"column":8},"end":{"line":93,"column":35}},"70":{"start":{"line":96,"column":8},"end":{"line":96,"column":52}},"71":{"start":{"line":99,"column":0},"end":{"line":99,"column":32}},"72":{"start":{"line":100,"column":19},"end":{"line":116,"column":2}},"73":{"start":{"line":100,"column":33},"end":{"line":116,"column":2}},"74":{"start":{"line":101,"column":4},"end":{"line":115,"column":5}},"75":{"start":{"line":102,"column":23},"end":{"line":102,"column":33}},"76":{"start":{"line":103,"column":24},"end":{"line":103,"column":51}},"77":{"start":{"line":104,"column":8},"end":{"line":106,"column":9}},"78":{"start":{"line":105,"column":12},"end":{"line":105,"column":69}},"79":{"start":{"line":107,"column":23},"end":{"line":107,"column":52}},"80":{"start":{"line":108,"column":8},"end":{"line":110,"column":9}},"81":{"start":{"line":109,"column":12},"end":{"line":109,"column":67}},"82":{"start":{"line":111,"column":8},"end":{"line":111,"column":35}},"83":{"start":{"line":114,"column":8},"end":{"line":114,"column":52}},"84":{"start":{"line":117,"column":0},"end":{"line":117,"column":32}},"85":{"start":{"line":118,"column":26},"end":{"line":149,"column":2}},"86":{"start":{"line":118,"column":40},"end":{"line":149,"column":2}},"87":{"start":{"line":119,"column":4},"end":{"line":148,"column":5}},"88":{"start":{"line":120,"column":28},"end":{"line":120,"column":38}},"89":{"start":{"line":121,"column":25},"end":{"line":121,"column":62}},"90":{"start":{"line":122,"column":37},"end":{"line":142,"column":11}},"91":{"start":{"line":122,"column":63},"end":{"line":142,"column":10}},"92":{"start":{"line":123,"column":25},"end":{"line":123,"column":65}},"93":{"start":{"line":124,"column":12},"end":{"line":126,"column":13}},"94":{"start":{"line":125,"column":16},"end":{"line":125,"column":74}},"95":{"start":{"line":127,"column":31},"end":{"line":127,"column":76}},"96":{"start":{"line":128,"column":30},"end":{"line":128,"column":31}},"97":{"start":{"line":129,"column":12},"end":{"line":134,"column":13}},"98":{"start":{"line":130,"column":29},"end":{"line":130,"column":71}},"99":{"start":{"line":131,"column":16},"end":{"line":133,"column":17}},"100":{"start":{"line":132,"column":20},"end":{"line":132,"column":67}},"101":{"start":{"line":135,"column":12},"end":{"line":141,"column":14}},"102":{"start":{"line":143,"column":29},"end":{"line":143,"column":68}},"103":{"start":{"line":144,"column":8},"end":{"line":144,"column":50}},"104":{"start":{"line":147,"column":8},"end":{"line":147,"column":52}},"105":{"start":{"line":150,"column":0},"end":{"line":150,"column":46}},"106":{"start":{"line":151,"column":18},"end":{"line":171,"column":2}},"107":{"start":{"line":151,"column":32},"end":{"line":171,"column":2}},"108":{"start":{"line":152,"column":4},"end":{"line":170,"column":5}},"109":{"start":{"line":153,"column":38},"end":{"line":153,"column":46}},"110":{"start":{"line":154,"column":8},"end":{"line":154,"column":29}},"111":{"start":{"line":155,"column":23},"end":{"line":155,"column":60}},"112":{"start":{"line":156,"column":8},"end":{"line":156,"column":28}},"113":{"start":{"line":157,"column":8},"end":{"line":159,"column":9}},"114":{"start":{"line":158,"column":12},"end":{"line":158,"column":69}},"115":{"start":{"line":160,"column":8},"end":{"line":162,"column":9}},"116":{"start":{"line":161,"column":12},"end":{"line":161,"column":69}},"117":{"start":{"line":163,"column":22},"end":{"line":165,"column":10}},"118":{"start":{"line":166,"column":8},"end":{"line":166,"column":69}},"119":{"start":{"line":169,"column":8},"end":{"line":169,"column":52}},"120":{"start":{"line":172,"column":0},"end":{"line":172,"column":30}},"121":{"start":{"line":173,"column":24},"end":{"line":188,"column":2}},"122":{"start":{"line":173,"column":38},"end":{"line":188,"column":2}},"123":{"start":{"line":174,"column":4},"end":{"line":187,"column":5}},"124":{"start":{"line":175,"column":32},"end":{"line":175,"column":42}},"125":{"start":{"line":176,"column":24},"end":{"line":176,"column":64}},"126":{"start":{"line":177,"column":8},"end":{"line":179,"column":9}},"127":{"start":{"line":178,"column":12},"end":{"line":178,"column":70}},"128":{"start":{"line":180,"column":8},"end":{"line":182,"column":9}},"129":{"start":{"line":181,"column":12},"end":{"line":181,"column":72}},"130":{"start":{"line":183,"column":8},"end":{"line":183,"column":45}},"131":{"start":{"line":186,"column":8},"end":{"line":186,"column":52}},"132":{"start":{"line":189,"column":0},"end":{"line":189,"column":42}},"133":{"start":{"line":190,"column":20},"end":{"line":232,"column":2}},"134":{"start":{"line":190,"column":34},"end":{"line":232,"column":2}},"135":{"start":{"line":191,"column":4},"end":{"line":231,"column":5}},"136":{"start":{"line":192,"column":32},"end":{"line":192,"column":42}},"137":{"start":{"line":193,"column":25},"end":{"line":193,"column":53}},"138":{"start":{"line":194,"column":8},"end":{"line":196,"column":9}},"139":{"start":{"line":195,"column":12},"end":{"line":195,"column":70}},"140":{"start":{"line":197,"column":8},"end":{"line":199,"column":9}},"141":{"start":{"line":198,"column":12},"end":{"line":198,"column":72}},"142":{"start":{"line":200,"column":24},"end":{"line":200,"column":72}},"143":{"start":{"line":201,"column":23},"end":{"line":201,"column":62}},"144":{"start":{"line":202,"column":8},"end":{"line":204,"column":9}},"145":{"start":{"line":203,"column":12},"end":{"line":203,"column":67}},"146":{"start":{"line":205,"column":25},"end":{"line":205,"column":66}},"147":{"start":{"line":206,"column":8},"end":{"line":210,"column":9}},"148":{"start":{"line":207,"column":12},"end":{"line":209,"column":66}},"149":{"start":{"line":211,"column":26},"end":{"line":211,"column":92}},"150":{"start":{"line":212,"column":25},"end":{"line":212,"column":66}},"151":{"start":{"line":213,"column":8},"end":{"line":217,"column":9}},"152":{"start":{"line":214,"column":12},"end":{"line":216,"column":66}},"153":{"start":{"line":218,"column":29},"end":{"line":218,"column":122}},"154":{"start":{"line":219,"column":8},"end":{"line":223,"column":9}},"155":{"start":{"line":220,"column":12},"end":{"line":222,"column":15}},"156":{"start":{"line":224,"column":26},"end":{"line":224,"column":104}},"157":{"start":{"line":225,"column":8},"end":{"line":225,"column":89}},"158":{"start":{"line":226,"column":8},"end":{"line":226,"column":89}},"159":{"start":{"line":227,"column":8},"end":{"line":227,"column":35}},"160":{"start":{"line":230,"column":8},"end":{"line":230,"column":52}},"161":{"start":{"line":233,"column":0},"end":{"line":233,"column":34}},"162":{"start":{"line":234,"column":19},"end":{"line":275,"column":2}},"163":{"start":{"line":234,"column":33},"end":{"line":275,"column":2}},"164":{"start":{"line":235,"column":4},"end":{"line":274,"column":5}},"165":{"start":{"line":236,"column":28},"end":{"line":236,"column":38}},"166":{"start":{"line":237,"column":32},"end":{"line":237,"column":41}},"167":{"start":{"line":238,"column":26},"end":{"line":238,"column":44}},"168":{"start":{"line":239,"column":27},"end":{"line":239,"column":46}},"169":{"start":{"line":240,"column":8},"end":{"line":244,"column":9}},"170":{"start":{"line":241,"column":12},"end":{"line":243,"column":77}},"171":{"start":{"line":245,"column":27},"end":{"line":247,"column":38}},"172":{"start":{"line":248,"column":28},"end":{"line":250,"column":39}},"173":{"start":{"line":251,"column":8},"end":{"line":255,"column":9}},"174":{"start":{"line":252,"column":12},"end":{"line":254,"column":15}},"175":{"start":{"line":256,"column":25},"end":{"line":256,"column":92}},"176":{"start":{"line":257,"column":27},"end":{"line":257,"column":28}},"177":{"start":{"line":258,"column":8},"end":{"line":269,"column":9}},"178":{"start":{"line":259,"column":12},"end":{"line":261,"column":13}},"179":{"start":{"line":260,"column":16},"end":{"line":260,"column":25}},"180":{"start":{"line":262,"column":31},"end":{"line":262,"column":74}},"181":{"start":{"line":263,"column":12},"end":{"line":268,"column":13}},"182":{"start":{"line":264,"column":29},"end":{"line":264,"column":71}},"183":{"start":{"line":265,"column":16},"end":{"line":267,"column":17}},"184":{"start":{"line":266,"column":20},"end":{"line":266,"column":68}},"185":{"start":{"line":270,"column":8},"end":{"line":270,"column":63}},"186":{"start":{"line":273,"column":8},"end":{"line":273,"column":52}},"187":{"start":{"line":276,"column":0},"end":{"line":276,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":18}},"loc":{"start":{"line":29,"column":29},"end":{"line":37,"column":2}},"line":29},"9":{"name":"(anonymous_9)","decl":{"start":{"line":29,"column":63},"end":{"line":29,"column":64}},"loc":{"start":{"line":29,"column":76},"end":{"line":37,"column":1}},"line":29},"10":{"name":"(anonymous_10)","decl":{"start":{"line":39,"column":16},"end":{"line":39,"column":17}},"loc":{"start":{"line":39,"column":30},"end":{"line":51,"column":2}},"line":39},"11":{"name":"(anonymous_11)","decl":{"start":{"line":39,"column":64},"end":{"line":39,"column":65}},"loc":{"start":{"line":39,"column":77},"end":{"line":51,"column":1}},"line":39},"12":{"name":"(anonymous_12)","decl":{"start":{"line":53,"column":19},"end":{"line":53,"column":20}},"loc":{"start":{"line":53,"column":33},"end":{"line":79,"column":2}},"line":53},"13":{"name":"(anonymous_13)","decl":{"start":{"line":53,"column":67},"end":{"line":53,"column":68}},"loc":{"start":{"line":53,"column":80},"end":{"line":79,"column":1}},"line":53},"14":{"name":"(anonymous_14)","decl":{"start":{"line":81,"column":19},"end":{"line":81,"column":20}},"loc":{"start":{"line":81,"column":33},"end":{"line":98,"column":2}},"line":81},"15":{"name":"(anonymous_15)","decl":{"start":{"line":81,"column":67},"end":{"line":81,"column":68}},"loc":{"start":{"line":81,"column":80},"end":{"line":98,"column":1}},"line":81},"16":{"name":"(anonymous_16)","decl":{"start":{"line":100,"column":19},"end":{"line":100,"column":20}},"loc":{"start":{"line":100,"column":33},"end":{"line":116,"column":2}},"line":100},"17":{"name":"(anonymous_17)","decl":{"start":{"line":100,"column":67},"end":{"line":100,"column":68}},"loc":{"start":{"line":100,"column":80},"end":{"line":116,"column":1}},"line":100},"18":{"name":"(anonymous_18)","decl":{"start":{"line":118,"column":26},"end":{"line":118,"column":27}},"loc":{"start":{"line":118,"column":40},"end":{"line":149,"column":2}},"line":118},"19":{"name":"(anonymous_19)","decl":{"start":{"line":118,"column":74},"end":{"line":118,"column":75}},"loc":{"start":{"line":118,"column":87},"end":{"line":149,"column":1}},"line":118},"20":{"name":"(anonymous_20)","decl":{"start":{"line":122,"column":50},"end":{"line":122,"column":51}},"loc":{"start":{"line":122,"column":63},"end":{"line":142,"column":10}},"line":122},"21":{"name":"(anonymous_21)","decl":{"start":{"line":122,"column":97},"end":{"line":122,"column":98}},"loc":{"start":{"line":122,"column":110},"end":{"line":142,"column":9}},"line":122},"22":{"name":"(anonymous_22)","decl":{"start":{"line":151,"column":18},"end":{"line":151,"column":19}},"loc":{"start":{"line":151,"column":32},"end":{"line":171,"column":2}},"line":151},"23":{"name":"(anonymous_23)","decl":{"start":{"line":151,"column":66},"end":{"line":151,"column":67}},"loc":{"start":{"line":151,"column":79},"end":{"line":171,"column":1}},"line":151},"24":{"name":"(anonymous_24)","decl":{"start":{"line":173,"column":24},"end":{"line":173,"column":25}},"loc":{"start":{"line":173,"column":38},"end":{"line":188,"column":2}},"line":173},"25":{"name":"(anonymous_25)","decl":{"start":{"line":173,"column":72},"end":{"line":173,"column":73}},"loc":{"start":{"line":173,"column":85},"end":{"line":188,"column":1}},"line":173},"26":{"name":"(anonymous_26)","decl":{"start":{"line":190,"column":20},"end":{"line":190,"column":21}},"loc":{"start":{"line":190,"column":34},"end":{"line":232,"column":2}},"line":190},"27":{"name":"(anonymous_27)","decl":{"start":{"line":190,"column":68},"end":{"line":190,"column":69}},"loc":{"start":{"line":190,"column":81},"end":{"line":232,"column":1}},"line":190},"28":{"name":"(anonymous_28)","decl":{"start":{"line":234,"column":19},"end":{"line":234,"column":20}},"loc":{"start":{"line":234,"column":33},"end":{"line":275,"column":2}},"line":234},"29":{"name":"(anonymous_29)","decl":{"start":{"line":234,"column":67},"end":{"line":234,"column":68}},"loc":{"start":{"line":234,"column":80},"end":{"line":275,"column":1}},"line":234}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":43,"column":8},"end":{"line":45,"column":9}},"type":"if","locations":[{"start":{"line":43,"column":8},"end":{"line":45,"column":9}},{"start":{"line":43,"column":8},"end":{"line":45,"column":9}}],"line":43},"9":{"loc":{"start":{"line":58,"column":8},"end":{"line":60,"column":9}},"type":"if","locations":[{"start":{"line":58,"column":8},"end":{"line":60,"column":9}},{"start":{"line":58,"column":8},"end":{"line":60,"column":9}}],"line":58},"10":{"loc":{"start":{"line":85,"column":8},"end":{"line":87,"column":9}},"type":"if","locations":[{"start":{"line":85,"column":8},"end":{"line":87,"column":9}},{"start":{"line":85,"column":8},"end":{"line":87,"column":9}}],"line":85},"11":{"loc":{"start":{"line":90,"column":8},"end":{"line":92,"column":9}},"type":"if","locations":[{"start":{"line":90,"column":8},"end":{"line":92,"column":9}},{"start":{"line":90,"column":8},"end":{"line":92,"column":9}}],"line":90},"12":{"loc":{"start":{"line":104,"column":8},"end":{"line":106,"column":9}},"type":"if","locations":[{"start":{"line":104,"column":8},"end":{"line":106,"column":9}},{"start":{"line":104,"column":8},"end":{"line":106,"column":9}}],"line":104},"13":{"loc":{"start":{"line":108,"column":8},"end":{"line":110,"column":9}},"type":"if","locations":[{"start":{"line":108,"column":8},"end":{"line":110,"column":9}},{"start":{"line":108,"column":8},"end":{"line":110,"column":9}}],"line":108},"14":{"loc":{"start":{"line":124,"column":12},"end":{"line":126,"column":13}},"type":"if","locations":[{"start":{"line":124,"column":12},"end":{"line":126,"column":13}},{"start":{"line":124,"column":12},"end":{"line":126,"column":13}}],"line":124},"15":{"loc":{"start":{"line":131,"column":16},"end":{"line":133,"column":17}},"type":"if","locations":[{"start":{"line":131,"column":16},"end":{"line":133,"column":17}},{"start":{"line":131,"column":16},"end":{"line":133,"column":17}}],"line":131},"16":{"loc":{"start":{"line":157,"column":8},"end":{"line":159,"column":9}},"type":"if","locations":[{"start":{"line":157,"column":8},"end":{"line":159,"column":9}},{"start":{"line":157,"column":8},"end":{"line":159,"column":9}}],"line":157},"17":{"loc":{"start":{"line":160,"column":8},"end":{"line":162,"column":9}},"type":"if","locations":[{"start":{"line":160,"column":8},"end":{"line":162,"column":9}},{"start":{"line":160,"column":8},"end":{"line":162,"column":9}}],"line":160},"18":{"loc":{"start":{"line":177,"column":8},"end":{"line":179,"column":9}},"type":"if","locations":[{"start":{"line":177,"column":8},"end":{"line":179,"column":9}},{"start":{"line":177,"column":8},"end":{"line":179,"column":9}}],"line":177},"19":{"loc":{"start":{"line":180,"column":8},"end":{"line":182,"column":9}},"type":"if","locations":[{"start":{"line":180,"column":8},"end":{"line":182,"column":9}},{"start":{"line":180,"column":8},"end":{"line":182,"column":9}}],"line":180},"20":{"loc":{"start":{"line":194,"column":8},"end":{"line":196,"column":9}},"type":"if","locations":[{"start":{"line":194,"column":8},"end":{"line":196,"column":9}},{"start":{"line":194,"column":8},"end":{"line":196,"column":9}}],"line":194},"21":{"loc":{"start":{"line":197,"column":8},"end":{"line":199,"column":9}},"type":"if","locations":[{"start":{"line":197,"column":8},"end":{"line":199,"column":9}},{"start":{"line":197,"column":8},"end":{"line":199,"column":9}}],"line":197},"22":{"loc":{"start":{"line":202,"column":8},"end":{"line":204,"column":9}},"type":"if","locations":[{"start":{"line":202,"column":8},"end":{"line":204,"column":9}},{"start":{"line":202,"column":8},"end":{"line":204,"column":9}}],"line":202},"23":{"loc":{"start":{"line":206,"column":8},"end":{"line":210,"column":9}},"type":"if","locations":[{"start":{"line":206,"column":8},"end":{"line":210,"column":9}},{"start":{"line":206,"column":8},"end":{"line":210,"column":9}}],"line":206},"24":{"loc":{"start":{"line":211,"column":26},"end":{"line":211,"column":92}},"type":"cond-expr","locations":[{"start":{"line":211,"column":69},"end":{"line":211,"column":75}},{"start":{"line":211,"column":78},"end":{"line":211,"column":92}}],"line":211},"25":{"loc":{"start":{"line":211,"column":26},"end":{"line":211,"column":66}},"type":"binary-expr","locations":[{"start":{"line":211,"column":26},"end":{"line":211,"column":43}},{"start":{"line":211,"column":47},"end":{"line":211,"column":66}}],"line":211},"26":{"loc":{"start":{"line":213,"column":8},"end":{"line":217,"column":9}},"type":"if","locations":[{"start":{"line":213,"column":8},"end":{"line":217,"column":9}},{"start":{"line":213,"column":8},"end":{"line":217,"column":9}}],"line":213},"27":{"loc":{"start":{"line":218,"column":53},"end":{"line":218,"column":121}},"type":"cond-expr","locations":[{"start":{"line":218,"column":96},"end":{"line":218,"column":102}},{"start":{"line":218,"column":105},"end":{"line":218,"column":121}}],"line":218},"28":{"loc":{"start":{"line":218,"column":53},"end":{"line":218,"column":93}},"type":"binary-expr","locations":[{"start":{"line":218,"column":53},"end":{"line":218,"column":70}},{"start":{"line":218,"column":74},"end":{"line":218,"column":93}}],"line":218},"29":{"loc":{"start":{"line":219,"column":8},"end":{"line":223,"column":9}},"type":"if","locations":[{"start":{"line":219,"column":8},"end":{"line":223,"column":9}},{"start":{"line":219,"column":8},"end":{"line":223,"column":9}}],"line":219},"30":{"loc":{"start":{"line":224,"column":26},"end":{"line":224,"column":104}},"type":"cond-expr","locations":[{"start":{"line":224,"column":77},"end":{"line":224,"column":83}},{"start":{"line":224,"column":86},"end":{"line":224,"column":104}}],"line":224},"31":{"loc":{"start":{"line":224,"column":26},"end":{"line":224,"column":74}},"type":"binary-expr","locations":[{"start":{"line":224,"column":26},"end":{"line":224,"column":47}},{"start":{"line":224,"column":51},"end":{"line":224,"column":74}}],"line":224},"32":{"loc":{"start":{"line":240,"column":8},"end":{"line":244,"column":9}},"type":"if","locations":[{"start":{"line":240,"column":8},"end":{"line":244,"column":9}},{"start":{"line":240,"column":8},"end":{"line":244,"column":9}}],"line":240},"33":{"loc":{"start":{"line":240,"column":12},"end":{"line":240,"column":37}},"type":"binary-expr","locations":[{"start":{"line":240,"column":12},"end":{"line":240,"column":22}},{"start":{"line":240,"column":26},"end":{"line":240,"column":37}}],"line":240},"34":{"loc":{"start":{"line":245,"column":27},"end":{"line":247,"column":38}},"type":"cond-expr","locations":[{"start":{"line":246,"column":14},"end":{"line":246,"column":28}},{"start":{"line":247,"column":14},"end":{"line":247,"column":38}}],"line":245},"35":{"loc":{"start":{"line":248,"column":28},"end":{"line":250,"column":39}},"type":"cond-expr","locations":[{"start":{"line":249,"column":14},"end":{"line":249,"column":29}},{"start":{"line":250,"column":14},"end":{"line":250,"column":39}}],"line":248},"36":{"loc":{"start":{"line":251,"column":8},"end":{"line":255,"column":9}},"type":"if","locations":[{"start":{"line":251,"column":8},"end":{"line":255,"column":9}},{"start":{"line":251,"column":8},"end":{"line":255,"column":9}}],"line":251},"37":{"loc":{"start":{"line":251,"column":12},"end":{"line":251,"column":47}},"type":"binary-expr","locations":[{"start":{"line":251,"column":12},"end":{"line":251,"column":27}},{"start":{"line":251,"column":31},"end":{"line":251,"column":47}}],"line":251},"38":{"loc":{"start":{"line":259,"column":12},"end":{"line":261,"column":13}},"type":"if","locations":[{"start":{"line":259,"column":12},"end":{"line":261,"column":13}},{"start":{"line":259,"column":12},"end":{"line":261,"column":13}}],"line":259},"39":{"loc":{"start":{"line":265,"column":16},"end":{"line":267,"column":17}},"type":"if","locations":[{"start":{"line":265,"column":16},"end":{"line":267,"column":17}},{"start":{"line":265,"column":16},"end":{"line":267,"column":17}}],"line":265}},"s":{"0":1,"1":3,"2":0,"3":2,"4":3,"5":3,"6":0,"7":0,"8":0,"9":0,"10":5,"11":2,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1,"36":1,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":1,"46":1,"47":2,"48":2,"49":2,"50":2,"51":2,"52":1,"53":1,"54":1,"55":1,"56":0,"57":1,"58":1,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":1,"72":1,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":1,"85":1,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":1,"106":1,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":1,"121":1,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":1,"133":1,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":1,"162":1,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":1},"f":{"0":2,"1":3,"2":0,"3":2,"4":3,"5":0,"6":5,"7":1,"8":0,"9":0,"10":0,"11":0,"12":2,"13":2,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0},"b":{"0":[1,1,1],"1":[3,0],"2":[2,2],"3":[2,3],"4":[2,2],"5":[1,1,1],"6":[0,1],"7":[1,1],"8":[0,0],"9":[1,1],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/controllers/user.ts","sources":["/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/controllers/user.ts"],"names":[],"mappings":"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","sourcesContent":["import type {\n    CancelOrderPayload,\n    CreateUserPayload,\n    CreateUserResponse,\n    GetOrderDetailsPayload,\n    GetOrderResponse,\n    GetOrdersByUserIdResponse,\n    GetUserResponse,\n    GetUsersResponse,\n    UpdateOrderResponse,\n    UpdateUserPayload,\n    UserData,\n    deleteUserResponse,\n    updateUserResponse,\n    userLoginPayload,\n    userLoginResponse,\n} from '@lib/shared_types';\nimport type { Request, Response } from 'express';\nimport jwt from 'jsonwebtoken';\n\nimport { OrderStatus } from '../../../lib/shared_types';\nimport { genericErrorHandler } from '../utils/errors';\nimport { MongoMealRepository } from './meal_repository';\nimport { MongoOrderItemRepository } from './orderItem_repository';\nimport { MongoOrderRepository } from './order_repository';\nimport { MongoShopRepository } from './shop_repository';\nimport { MongoUserRepository } from './user_repository';\n\nconst userRepo = new MongoUserRepository();\nconst orderRepo = new MongoOrderRepository();\nconst orderItemRepo = new MongoOrderItemRepository();\nconst mealRepo = new MongoMealRepository();\nconst shopRepo = new MongoShopRepository();\n\nexport const getUsers = async (_: Request, res: Response<GetUsersResponse>) => {\n    try {\n        const dbUsers = await userRepo.findAll();\n\n        return res.status(200).json(dbUsers);\n    } catch (err) {\n        genericErrorHandler(err, res);\n    }\n};\n\nexport const getUser = async (\n    req: Request<{ id: string }>,\n    res: Response<GetUserResponse | { error: string }>,\n) => {\n    try {\n        const { id } = req.params;\n\n        const dbUser = await userRepo.findById(id);\n        if (!dbUser) {\n            return res.status(404).json({ error: 'User not found' });\n        }\n\n        return res.status(200).json(dbUser);\n    } catch (err) {\n        genericErrorHandler(err, res);\n    }\n};\n\nexport const createUser = async (\n    req: Request<never, never, CreateUserPayload>,\n    res: Response<CreateUserResponse | { error: string }>,\n) => {\n    try {\n        const { account, username, password, email, phone, role, birthday } =\n            req.body;\n\n        // check if the user name is already in the database\n        const user = await userRepo.findByAccount(account);\n        if (user !== null) {\n            return res.status(404).json({ error: 'User already exists' });\n        }\n\n        const payload: Omit<UserData, 'id'> = {\n            account,\n            password,\n            username,\n            email,\n            phone,\n            role,\n            birthday,\n            verified: false,\n            created_at: new Date().toISOString(),\n            last_login: new Date().toISOString(),\n        };\n\n        const newUser = await userRepo.create(payload);\n\n        return res.status(201).json({ id: newUser.id });\n    } catch (err) {\n        genericErrorHandler(err, res);\n    }\n};\n\nexport const updateUser = async (\n    req: Request<{ id: string }, never, UpdateUserPayload>,\n    res: Response<updateUserResponse | { error: string }>,\n) => {\n    try {\n        const { id } = req.params;\n\n        const oldUser = await userRepo.findById(id);\n\n        if (!oldUser) {\n            return res.status(404).json({ error: 'User not found' });\n        }\n\n        const payLoad = req.body;\n\n        const result = await userRepo.updateById(id, payLoad);\n\n        if (!result) {\n            return res.status(404).json({ error: 'Update fails' });\n        }\n\n        res.status(200).send('OK');\n    } catch (err) {\n        genericErrorHandler(err, res);\n    }\n};\n\nexport const deleteUser = async (\n    req: Request<{ id: string }>,\n    res: Response<deleteUserResponse | { error: string }>,\n) => {\n    try {\n        const { id } = req.params;\n\n        const oldUser = await userRepo.findById(id);\n\n        if (!oldUser) {\n            return res.status(404).json({ error: 'User not found' });\n        }\n\n        const result = await userRepo.deleteById(id);\n        if (!result) {\n            return res.status(404).json({ error: 'Delete fails' });\n        }\n\n        res.status(200).send('OK');\n    } catch (err) {\n        genericErrorHandler(err, res);\n    }\n};\n\nexport const getOrdersByUserId = async (\n    req: Request<{ user_id: string }>,\n    res: Response<GetOrdersByUserIdResponse | { error: string }>,\n) => {\n    try {\n        const { user_id } = req.params;\n        const dbOrders = await orderRepo.findByUserId(user_id);\n\n        const orderHistoryPromises = dbOrders.map(async (dbOrder) => {\n            const shop = await shopRepo.findById(dbOrder.shop_id);\n            if (!shop) {\n                throw new Error(`Shop not found for order ${dbOrder.id}`);\n            }\n\n            const orderItems = await orderItemRepo.findByOrderId(dbOrder.id);\n            let order_price = 0;\n\n            for (const orderItem of orderItems) {\n                const meal = await mealRepo.findById(orderItem.meal_id);\n                if (meal) {\n                    order_price += meal.price * orderItem.quantity;\n                }\n            }\n\n            return {\n                status: dbOrder.status,\n                order_date: dbOrder.order_date,\n                order_price: order_price,\n                shop_name: shop.name,\n                shop_image: shop.image,\n            };\n        });\n\n        const orderHistory: GetOrdersByUserIdResponse =\n            await Promise.all(orderHistoryPromises);\n\n        return res.status(200).json(orderHistory);\n    } catch (err) {\n        genericErrorHandler(err, res);\n    }\n};\n\nexport const userLogin = async (\n    req: Request<userLoginPayload>,\n    res: Response<userLoginResponse | { error: string }>,\n) => {\n    try {\n        const { account, password } = req.body;\n\n        console.log(account);\n        const dbUser = await userRepo.findByAccount(account);\n        console.log(dbUser);\n        if (!dbUser) {\n            return res.status(404).json({ error: 'User not found' });\n        }\n\n        if (dbUser.password !== password) {\n            return res.status(404).json({ error: 'Wrong password' });\n        }\n\n        const token = jwt.sign({ userId: dbUser.id }, 'your_jwt_secret', {\n            expiresIn: '1h',\n        });\n\n        return res.status(200).json({ id: dbUser.id, token: token });\n    } catch (err) {\n        genericErrorHandler(err, res);\n    }\n};\n\nexport const getOrderDetails = async (\n    req: Request<GetOrderDetailsPayload>,\n    res: Response<GetOrderResponse | { error: string }>,\n) => {\n    try {\n        const { user_id, id } = req.params;\n        const dbOrder = await orderRepo.findDetailsByOrderId(id);\n        if (!dbOrder) {\n            return res.status(404).json({ error: 'Order not found' });\n        }\n        if (dbOrder.user_id !== user_id) {\n            return res.status(403).json({ error: 'Permission denied' });\n        }\n\n        return res.status(200).json(dbOrder);\n    } catch (err) {\n        genericErrorHandler(err, res);\n    }\n};\n\nexport const cancelOrder = async (\n    req: Request<CancelOrderPayload>,\n    res: Response<UpdateOrderResponse | { error: string }>,\n) => {\n    try {\n        const { id, user_id } = req.params;\n\n        const oldOrder = await orderRepo.findById(id);\n        if (!oldOrder) {\n            return res.status(404).json({ error: 'Order not found' });\n        }\n        if (oldOrder.user_id !== user_id) {\n            return res.status(403).json({ error: 'Permission denied' });\n        }\n\n        const payLoad = { status: OrderStatus.CANCELLED };\n        const result = await orderRepo.updateById(id, payLoad);\n\n        if (!result) {\n            return res.status(404).json({ error: 'Update fails' });\n        }\n\n        const userData = await userRepo.findById(oldOrder.user_id);\n        if (userData === null) {\n            return res\n                .status(403)\n                .json({ error: 'User not found in cancelOrder' });\n        }\n        const userEmail = userData?.email;\n        const shopData = await shopRepo.findById(oldOrder.shop_id);\n        if (shopData === null) {\n            return res\n                .status(403)\n                .json({ error: 'Shop not found in cancelOrder' });\n        }\n        const shopUserData = await userRepo.findById(shopData?.user_id);\n        if (shopUserData === null) {\n            return res.status(403).json({\n                error: 'UserId of Shop not found in UserDB in cancelOrder',\n            });\n        }\n        const shopEmail = shopUserData?.email;\n        await orderRepo.sendEmailToUser(userEmail, OrderStatus.CANCELLED);\n        await orderRepo.sendEmailToShop(shopEmail, OrderStatus.CANCELLED);\n\n        res.status(200).send('OK');\n    } catch (err) {\n        genericErrorHandler(err, res);\n    }\n};\n\nexport const getBalance = async (\n    req: Request<{ user_id: string; year: string; month: string }>,\n    res: Response<{ balance: number } | { error: string }>,\n) => {\n    try {\n        const { user_id } = req.params;\n        const { year, month } = req.query;\n\n        const parseYear = /^\\d+$/.test(year as string);\n        const parseMonth = /^\\d+$/.test(month as string);\n\n        if (!parseYear || !parseMonth) {\n            return res\n                .status(400)\n                .json({ error: 'Year and month should be numeric values.' });\n        }\n\n        const targetYear = year\n            ? parseInt(year as string)\n            : new Date().getFullYear();\n        const targetMonth = month\n            ? parseInt(month as string)\n            : new Date().getMonth() + 1;\n\n        if (targetMonth < 1 || targetMonth > 12) {\n            return res.status(400).json({\n                error: 'Invalid month. Month should be between 1 and 12.',\n            });\n        }\n\n        const dbOrders = await orderRepo.findByUserIdMonth(\n            user_id,\n            targetYear,\n            targetMonth,\n        );\n\n        let totalBalance: number = 0;\n\n        for (const order of dbOrders) {\n            if (order.status !== OrderStatus.FINISHED) {\n                continue;\n            }\n            const orderItems = await orderItemRepo.findByOrderId(order.id);\n\n            for (const orderItem of orderItems) {\n                const meal = await mealRepo.findById(orderItem.meal_id);\n                if (meal) {\n                    totalBalance += meal.price * orderItem.quantity;\n                }\n            }\n        }\n        return res.status(200).json({ balance: totalBalance });\n    } catch (err) {\n        genericErrorHandler(err, res);\n    }\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4eb29b15a282592bbb89bdbec19cbb6fe3c2da08","contentHash":"dac43d70e5be98aa98e598042f708a3180311c04b27b2d0bf9ab2edb63341acc"},"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/utils/errors.ts":{"path":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/utils/errors.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":28},"end":{"line":13,"column":1}},"3":{"start":{"line":5,"column":4},"end":{"line":5,"column":25}},"4":{"start":{"line":7,"column":4},"end":{"line":12,"column":5}},"5":{"start":{"line":8,"column":8},"end":{"line":8,"column":62}},"6":{"start":{"line":11,"column":8},"end":{"line":11,"column":43}},"7":{"start":{"line":14,"column":0},"end":{"line":14,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":28},"end":{"line":4,"column":29}},"loc":{"start":{"line":4,"column":44},"end":{"line":13,"column":1}},"line":4}},"branchMap":{"0":{"loc":{"start":{"line":7,"column":4},"end":{"line":12,"column":5}},"type":"if","locations":[{"start":{"line":7,"column":4},"end":{"line":12,"column":5}},{"start":{"line":7,"column":4},"end":{"line":12,"column":5}}],"line":7}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":1},"f":{"0":0},"b":{"0":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/utils/errors.ts","sources":["/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/utils/errors.ts"],"names":[],"mappings":";;;AAEO,MAAM,mBAAmB,GAAG,CAAC,KAAc,EAAE,GAAa,EAAE,EAAE;IACjE,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;IAErB,0BAA0B;IAC1B,IAAI,KAAK,YAAY,KAAK,EAAE;QACxB,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;KACzD;SAAM;QACH,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KACtC;AACL,CAAC,CAAC;AATW,QAAA,mBAAmB,uBAS9B","sourcesContent":["import type { Response } from 'express';\n\nexport const genericErrorHandler = (error: unknown, res: Response) => {\n    console.error(error);\n\n    // Check the type of error\n    if (error instanceof Error) {\n        return res.status(500).json({ error: error.message });\n    } else {\n        return res.status(500).json(error);\n    }\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d5b8a2b4853d449dd88509a0294f9612744351b8","contentHash":"3c32cc6fe548f57de4d60057947732583dab9fa3c52c62162eb30d9350989783"},"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/controllers/meal_repository.ts":{"path":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/controllers/meal_repository.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":37}},"16":{"start":{"line":16,"column":15},"end":{"line":16,"column":57}},"17":{"start":{"line":17,"column":16},"end":{"line":17,"column":58}},"18":{"start":{"line":20,"column":8},"end":{"line":22,"column":11}},"19":{"start":{"line":21,"column":12},"end":{"line":21,"column":43}},"20":{"start":{"line":25,"column":8},"end":{"line":27,"column":11}},"21":{"start":{"line":26,"column":12},"end":{"line":26,"column":61}},"22":{"start":{"line":30,"column":8},"end":{"line":51,"column":11}},"23":{"start":{"line":31,"column":31},"end":{"line":31,"column":138}},"24":{"start":{"line":32,"column":12},"end":{"line":34,"column":13}},"25":{"start":{"line":33,"column":16},"end":{"line":33,"column":46}},"26":{"start":{"line":35,"column":25},"end":{"line":35,"column":58}},"27":{"start":{"line":36,"column":12},"end":{"line":38,"column":13}},"28":{"start":{"line":37,"column":16},"end":{"line":37,"column":28}},"29":{"start":{"line":39,"column":33},"end":{"line":48,"column":13}},"30":{"start":{"line":49,"column":12},"end":{"line":49,"column":162}},"31":{"start":{"line":50,"column":12},"end":{"line":50,"column":32}},"32":{"start":{"line":54,"column":8},"end":{"line":59,"column":11}},"33":{"start":{"line":55,"column":31},"end":{"line":55,"column":77}},"34":{"start":{"line":56,"column":12},"end":{"line":57,"column":28}},"35":{"start":{"line":57,"column":16},"end":{"line":57,"column":28}},"36":{"start":{"line":58,"column":12},"end":{"line":58,"column":25}},"37":{"start":{"line":62,"column":8},"end":{"line":65,"column":11}},"38":{"start":{"line":63,"column":25},"end":{"line":63,"column":65}},"39":{"start":{"line":64,"column":12},"end":{"line":64,"column":35}},"40":{"start":{"line":68,"column":8},"end":{"line":78,"column":11}},"41":{"start":{"line":70,"column":27},"end":{"line":72,"column":14}},"42":{"start":{"line":73,"column":12},"end":{"line":76,"column":13}},"43":{"start":{"line":74,"column":16},"end":{"line":74,"column":160}},"44":{"start":{"line":75,"column":16},"end":{"line":75,"column":28}},"45":{"start":{"line":77,"column":12},"end":{"line":77,"column":25}},"46":{"start":{"line":81,"column":8},"end":{"line":88,"column":11}},"47":{"start":{"line":82,"column":27},"end":{"line":82,"column":69}},"48":{"start":{"line":83,"column":12},"end":{"line":86,"column":13}},"49":{"start":{"line":84,"column":16},"end":{"line":84,"column":124}},"50":{"start":{"line":85,"column":16},"end":{"line":85,"column":28}},"51":{"start":{"line":87,"column":12},"end":{"line":87,"column":25}},"52":{"start":{"line":91,"column":0},"end":{"line":91,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":19,"column":4},"end":{"line":19,"column":5}},"loc":{"start":{"line":19,"column":14},"end":{"line":23,"column":5}},"line":19},"9":{"name":"(anonymous_9)","decl":{"start":{"line":20,"column":47},"end":{"line":20,"column":48}},"loc":{"start":{"line":20,"column":60},"end":{"line":22,"column":9}},"line":20},"10":{"name":"(anonymous_10)","decl":{"start":{"line":24,"column":4},"end":{"line":24,"column":5}},"loc":{"start":{"line":24,"column":29},"end":{"line":28,"column":5}},"line":24},"11":{"name":"(anonymous_11)","decl":{"start":{"line":25,"column":47},"end":{"line":25,"column":48}},"loc":{"start":{"line":25,"column":60},"end":{"line":27,"column":9}},"line":25},"12":{"name":"(anonymous_12)","decl":{"start":{"line":29,"column":4},"end":{"line":29,"column":5}},"loc":{"start":{"line":29,"column":17},"end":{"line":52,"column":5}},"line":29},"13":{"name":"(anonymous_13)","decl":{"start":{"line":30,"column":47},"end":{"line":30,"column":48}},"loc":{"start":{"line":30,"column":60},"end":{"line":51,"column":9}},"line":30},"14":{"name":"(anonymous_14)","decl":{"start":{"line":53,"column":4},"end":{"line":53,"column":5}},"loc":{"start":{"line":53,"column":39},"end":{"line":60,"column":5}},"line":53},"15":{"name":"(anonymous_15)","decl":{"start":{"line":54,"column":47},"end":{"line":54,"column":48}},"loc":{"start":{"line":54,"column":60},"end":{"line":59,"column":9}},"line":54},"16":{"name":"(anonymous_16)","decl":{"start":{"line":61,"column":4},"end":{"line":61,"column":5}},"loc":{"start":{"line":61,"column":20},"end":{"line":66,"column":5}},"line":61},"17":{"name":"(anonymous_17)","decl":{"start":{"line":62,"column":47},"end":{"line":62,"column":48}},"loc":{"start":{"line":62,"column":60},"end":{"line":65,"column":9}},"line":62},"18":{"name":"(anonymous_18)","decl":{"start":{"line":67,"column":4},"end":{"line":67,"column":5}},"loc":{"start":{"line":67,"column":28},"end":{"line":79,"column":5}},"line":67},"19":{"name":"(anonymous_19)","decl":{"start":{"line":68,"column":47},"end":{"line":68,"column":48}},"loc":{"start":{"line":68,"column":60},"end":{"line":78,"column":9}},"line":68},"20":{"name":"(anonymous_20)","decl":{"start":{"line":80,"column":4},"end":{"line":80,"column":5}},"loc":{"start":{"line":80,"column":19},"end":{"line":89,"column":5}},"line":80},"21":{"name":"(anonymous_21)","decl":{"start":{"line":81,"column":47},"end":{"line":81,"column":48}},"loc":{"start":{"line":81,"column":60},"end":{"line":88,"column":9}},"line":81}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":31,"column":38},"end":{"line":31,"column":137}},"type":"cond-expr","locations":[{"start":{"line":31,"column":95},"end":{"line":31,"column":101}},{"start":{"line":31,"column":104},"end":{"line":31,"column":137}}],"line":31},"9":{"loc":{"start":{"line":31,"column":38},"end":{"line":31,"column":92}},"type":"binary-expr","locations":[{"start":{"line":31,"column":38},"end":{"line":31,"column":62}},{"start":{"line":31,"column":66},"end":{"line":31,"column":92}}],"line":31},"10":{"loc":{"start":{"line":32,"column":12},"end":{"line":34,"column":13}},"type":"if","locations":[{"start":{"line":32,"column":12},"end":{"line":34,"column":13}},{"start":{"line":32,"column":12},"end":{"line":34,"column":13}}],"line":32},"11":{"loc":{"start":{"line":36,"column":12},"end":{"line":38,"column":13}},"type":"if","locations":[{"start":{"line":36,"column":12},"end":{"line":38,"column":13}},{"start":{"line":36,"column":12},"end":{"line":38,"column":13}}],"line":36},"12":{"loc":{"start":{"line":49,"column":19},"end":{"line":49,"column":160}},"type":"cond-expr","locations":[{"start":{"line":49,"column":76},"end":{"line":49,"column":82}},{"start":{"line":49,"column":85},"end":{"line":49,"column":160}}],"line":49},"13":{"loc":{"start":{"line":49,"column":19},"end":{"line":49,"column":73}},"type":"binary-expr","locations":[{"start":{"line":49,"column":19},"end":{"line":49,"column":43}},{"start":{"line":49,"column":47},"end":{"line":49,"column":73}}],"line":49},"14":{"loc":{"start":{"line":56,"column":12},"end":{"line":57,"column":28}},"type":"if","locations":[{"start":{"line":56,"column":12},"end":{"line":57,"column":28}},{"start":{"line":56,"column":12},"end":{"line":57,"column":28}}],"line":56},"15":{"loc":{"start":{"line":73,"column":12},"end":{"line":76,"column":13}},"type":"if","locations":[{"start":{"line":73,"column":12},"end":{"line":76,"column":13}},{"start":{"line":73,"column":12},"end":{"line":76,"column":13}}],"line":73},"16":{"loc":{"start":{"line":74,"column":23},"end":{"line":74,"column":158}},"type":"cond-expr","locations":[{"start":{"line":74,"column":80},"end":{"line":74,"column":86}},{"start":{"line":74,"column":89},"end":{"line":74,"column":158}}],"line":74},"17":{"loc":{"start":{"line":74,"column":23},"end":{"line":74,"column":77}},"type":"binary-expr","locations":[{"start":{"line":74,"column":23},"end":{"line":74,"column":47}},{"start":{"line":74,"column":51},"end":{"line":74,"column":77}}],"line":74},"18":{"loc":{"start":{"line":83,"column":12},"end":{"line":86,"column":13}},"type":"if","locations":[{"start":{"line":83,"column":12},"end":{"line":86,"column":13}},{"start":{"line":83,"column":12},"end":{"line":86,"column":13}}],"line":83},"19":{"loc":{"start":{"line":84,"column":23},"end":{"line":84,"column":122}},"type":"cond-expr","locations":[{"start":{"line":84,"column":80},"end":{"line":84,"column":86}},{"start":{"line":84,"column":89},"end":{"line":84,"column":122}}],"line":84},"20":{"loc":{"start":{"line":84,"column":23},"end":{"line":84,"column":77}},"type":"binary-expr","locations":[{"start":{"line":84,"column":23},"end":{"line":84,"column":47}},{"start":{"line":84,"column":51},"end":{"line":84,"column":77}}],"line":84}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":2,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[2,0],"7":[2,2],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/controllers/meal_repository.ts","sources":["/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/controllers/meal_repository.ts"],"names":[],"mappings":"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","sourcesContent":["import type {\n    CreateMealPayload,\n    CreateMealResponse,\n    GetMealResponse,\n    GetMealsResponse,\n    UpdateMealPayload,\n} from '@lib/shared_types';\n\nimport MealModel from '../models/meal';\nimport redis from '../utils/redis';\n\ninterface IMealRepository {\n    findAll(): Promise<GetMealsResponse>;\n    findAllbyShopId(shop_id: string): Promise<GetMealsResponse>;\n    findById(id: string): Promise<GetMealResponse | null>;\n    existsByShopAndName(shop_id: string, name: string): Promise<boolean>;\n    create(payload: CreateMealPayload): Promise<CreateMealResponse>;\n    updateById(id: string, payload: UpdateMealPayload): Promise<boolean>;\n    deleteById(id: string): Promise<boolean>;\n}\n\nexport class MongoMealRepository implements IMealRepository {\n    async findAll(): Promise<GetMealsResponse> {\n        return MealModel.find({});\n    }\n\n    async findAllbyShopId(shop_id: string): Promise<GetMealsResponse> {\n        return MealModel.find({ shop_id: shop_id });\n    }\n\n    async findById(id: string): Promise<GetMealResponse | null> {\n        const cachedMeal = await redis?.get(`meal:${id}`);\n        if (cachedMeal) {\n            return JSON.parse(cachedMeal);\n        }\n\n        const meal = await MealModel.findById(id);\n        if (!meal) {\n            return null;\n        }\n        const mealResponse: GetMealResponse = {\n            id: meal._id.toString(),\n            shop_id: meal.shop_id,\n            name: meal.name,\n            description: meal.description,\n            price: meal.price,\n            quantity: meal.quantity,\n            category: meal.category,\n            image: meal.image,\n        };\n\n        await redis?.set(\n            `meal:${id}`,\n            JSON.stringify(mealResponse),\n            'EX',\n            3600,\n        );\n\n        return mealResponse;\n    }\n\n    async existsByShopAndName(shop_id: string, name: string): Promise<boolean> {\n        const MealExists = await MealModel.exists({ shop_id, name });\n        if (MealExists) return true;\n        return false;\n    }\n\n    async create(payload: CreateMealPayload): Promise<CreateMealResponse> {\n        const meal = await new MealModel(payload).save();\n        return { id: meal.id };\n    }\n\n    async updateById(id: string, payload: UpdateMealPayload): Promise<boolean> {\n        // mongoose would ignore undefined values\n        const result = await MealModel.findByIdAndUpdate(id, payload, {\n            new: true,\n        });\n        if (result) {\n            await redis?.set(`meal:${id}`, JSON.stringify(result), 'EX', 3600);\n            return true;\n        }\n        return false;\n    }\n\n    async deleteById(id: string): Promise<boolean> {\n        const result = await MealModel.findByIdAndDelete(id);\n        if (result) {\n            await redis?.del(`meal:${id}`);\n            return true;\n        }\n        return false;\n    }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"47e33e5b424f32695bee60986aedae9591ddfcf6","contentHash":"56c87b8e19a3fc27f07d70ff5c4f6915120c6effbc4566cc9dc7444d9f4e7db3"},"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/models/meal.ts":{"path":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/models/meal.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":19},"end":{"line":6,"column":55}},"4":{"start":{"line":7,"column":19},"end":{"line":29,"column":2}},"5":{"start":{"line":23,"column":12},"end":{"line":23,"column":40}},"6":{"start":{"line":24,"column":12},"end":{"line":24,"column":49}},"7":{"start":{"line":25,"column":12},"end":{"line":25,"column":27}},"8":{"start":{"line":26,"column":12},"end":{"line":26,"column":27}},"9":{"start":{"line":30,"column":13},"end":{"line":30,"column":57}},"10":{"start":{"line":31,"column":0},"end":{"line":31,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":22,"column":19},"end":{"line":22,"column":20}},"loc":{"start":{"line":22,"column":31},"end":{"line":27,"column":9}},"line":22}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":1,"10":1},"f":{"0":1,"1":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/models/meal.ts","sources":["/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/models/meal.ts"],"names":[],"mappings":";;;;;AACA,wDAAgC;AAUhC,MAAM,UAAU,GAAG,IAAI,kBAAQ,CAAC,MAAM,CAClC;IACI,OAAO,EAAE;QACL,IAAI,EAAE,MAAM;QACZ,GAAG,EAAE,MAAM;QACX,QAAQ,EAAE,IAAI;KACjB;IACD,IAAI,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACtC,WAAW,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC7C,KAAK,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACvC,QAAQ,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC1C,QAAQ,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC1C,KAAK,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;CAC1C,EACD;IACI,UAAU,EAAE,IAAI;IAChB,MAAM,EAAE;QACJ,SAAS,EAAE,CAAC,CAAC,EAAE,GAAG,EAAQ,EAAE;YACxB,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;YAC5B,GAAG,CAAC,OAAO,GAAG,GAAG,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YACrC,OAAO,GAAG,CAAC,GAAG,CAAC;YACf,OAAO,GAAG,CAAC,GAAG,CAAC;QACnB,CAAC;KACJ;CACJ,CACJ,CAAC;AAEF,MAAM,IAAI,GAAG,kBAAQ,CAAC,KAAK,CAA0B,MAAM,EAAE,UAAU,CAAC,CAAC;AAEzE,kBAAe,IAAI,CAAC","sourcesContent":["import type { MealData } from '@lib/shared_types';\nimport mongoose from 'mongoose';\n\ninterface MealDocument\n    extends Omit<MealData, 'id' | 'shop_id'>,\n        mongoose.Document {\n    shop_id: string;\n}\n\ninterface MealModel extends mongoose.Model<MealDocument> {}\n\nconst MealSchema = new mongoose.Schema<MealDocument>(\n    {\n        shop_id: {\n            type: String,\n            ref: 'Shop',\n            required: true,\n        },\n        name: { type: String, required: true },\n        description: { type: String, required: true },\n        price: { type: Number, required: true },\n        quantity: { type: Number, required: true },\n        category: { type: String, required: true },\n        image: { type: String, required: true },\n    },\n    {\n        timestamps: true,\n        toJSON: {\n            transform: (_, ret): void => {\n                ret.id = ret._id.toString();\n                ret.shop_id = ret.shop_id.toString();\n                delete ret._id;\n                delete ret.__v;\n            },\n        },\n    },\n);\n\nconst Meal = mongoose.model<MealDocument, MealModel>('Meal', MealSchema);\n\nexport default Meal;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"34d70b5f7cfd0f06f66b0ecae6dba27dc8d583c7","contentHash":"dc022199f0ba12d16dff696d6f80a9d148f15cdd57a80efc210e3a323f2d2619"},"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/utils/redis.ts":{"path":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/utils/redis.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":17},"end":{"line":6,"column":51}},"4":{"start":{"line":7,"column":18},"end":{"line":7,"column":36}},"5":{"start":{"line":8,"column":0},"end":{"line":8,"column":26}},"6":{"start":{"line":9,"column":18},"end":{"line":9,"column":22}},"7":{"start":{"line":10,"column":0},"end":{"line":13,"column":1}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":61}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":38}},"10":{"start":{"line":14,"column":0},"end":{"line":14,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":10,"column":0},"end":{"line":13,"column":1}},"type":"if","locations":[{"start":{"line":10,"column":0},"end":{"line":13,"column":1}},{"start":{"line":10,"column":0},"end":{"line":13,"column":1}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[0,1]},"inputSourceMap":{"version":3,"file":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/utils/redis.ts","sources":["/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/utils/redis.ts"],"names":[],"mappings":";;;;;AAAA,oDAA4B;AAC5B,qCAAgC;AAEhC,gBAAM,CAAC,MAAM,EAAE,CAAC;AAEhB,IAAI,WAAW,GAAiB,IAAI,CAAC;AAErC,IAAI,OAAO,CAAC,GAAG,CAAC,SAAS,EAAE;IACvB,WAAW,GAAG,IAAI,eAAK,CAAC,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;IAC/C,OAAO,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;CACrC;AAED,kBAAe,WAAW,CAAC","sourcesContent":["import dotenv from 'dotenv';\nimport { Redis } from 'ioredis';\n\ndotenv.config();\n\nlet redisClient: Redis | null = null;\n\nif (process.env.REDIS_URL) {\n    redisClient = new Redis(process.env.REDIS_URL);\n    console.log('Connected to Redis');\n}\n\nexport default redisClient;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5a718672e51c70ca64155cac59cef43bcc159a54","contentHash":"908d31cbb7a316aa2fde9964add1acbf942a0e76fe1830b864ef3edc3e1384fe"},"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/controllers/orderItem_repository.ts":{"path":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/controllers/orderItem_repository.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":42}},"16":{"start":{"line":16,"column":20},"end":{"line":16,"column":67}},"17":{"start":{"line":19,"column":8},"end":{"line":21,"column":11}},"18":{"start":{"line":20,"column":12},"end":{"line":20,"column":48}},"19":{"start":{"line":24,"column":8},"end":{"line":26,"column":11}},"20":{"start":{"line":25,"column":12},"end":{"line":25,"column":52}},"21":{"start":{"line":29,"column":8},"end":{"line":31,"column":11}},"22":{"start":{"line":30,"column":12},"end":{"line":30,"column":62}},"23":{"start":{"line":34,"column":8},"end":{"line":37,"column":11}},"24":{"start":{"line":35,"column":30},"end":{"line":35,"column":62}},"25":{"start":{"line":36,"column":12},"end":{"line":36,"column":36}},"26":{"start":{"line":40,"column":8},"end":{"line":46,"column":11}},"27":{"start":{"line":42,"column":27},"end":{"line":44,"column":14}},"28":{"start":{"line":45,"column":12},"end":{"line":45,"column":34}},"29":{"start":{"line":49,"column":8},"end":{"line":52,"column":11}},"30":{"start":{"line":50,"column":27},"end":{"line":50,"column":74}},"31":{"start":{"line":51,"column":12},"end":{"line":51,"column":34}},"32":{"start":{"line":55,"column":0},"end":{"line":55,"column":60}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":18,"column":4},"end":{"line":18,"column":5}},"loc":{"start":{"line":18,"column":14},"end":{"line":22,"column":5}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":19,"column":47},"end":{"line":19,"column":48}},"loc":{"start":{"line":19,"column":60},"end":{"line":21,"column":9}},"line":19},"10":{"name":"(anonymous_10)","decl":{"start":{"line":23,"column":4},"end":{"line":23,"column":5}},"loc":{"start":{"line":23,"column":17},"end":{"line":27,"column":5}},"line":23},"11":{"name":"(anonymous_11)","decl":{"start":{"line":24,"column":47},"end":{"line":24,"column":48}},"loc":{"start":{"line":24,"column":60},"end":{"line":26,"column":9}},"line":24},"12":{"name":"(anonymous_12)","decl":{"start":{"line":28,"column":4},"end":{"line":28,"column":5}},"loc":{"start":{"line":28,"column":22},"end":{"line":32,"column":5}},"line":28},"13":{"name":"(anonymous_13)","decl":{"start":{"line":29,"column":47},"end":{"line":29,"column":48}},"loc":{"start":{"line":29,"column":60},"end":{"line":31,"column":9}},"line":29},"14":{"name":"(anonymous_14)","decl":{"start":{"line":33,"column":4},"end":{"line":33,"column":5}},"loc":{"start":{"line":33,"column":20},"end":{"line":38,"column":5}},"line":33},"15":{"name":"(anonymous_15)","decl":{"start":{"line":34,"column":47},"end":{"line":34,"column":48}},"loc":{"start":{"line":34,"column":60},"end":{"line":37,"column":9}},"line":34},"16":{"name":"(anonymous_16)","decl":{"start":{"line":39,"column":4},"end":{"line":39,"column":5}},"loc":{"start":{"line":39,"column":28},"end":{"line":47,"column":5}},"line":39},"17":{"name":"(anonymous_17)","decl":{"start":{"line":40,"column":47},"end":{"line":40,"column":48}},"loc":{"start":{"line":40,"column":60},"end":{"line":46,"column":9}},"line":40},"18":{"name":"(anonymous_18)","decl":{"start":{"line":48,"column":4},"end":{"line":48,"column":5}},"loc":{"start":{"line":48,"column":19},"end":{"line":53,"column":5}},"line":48},"19":{"name":"(anonymous_19)","decl":{"start":{"line":49,"column":47},"end":{"line":49,"column":48}},"loc":{"start":{"line":49,"column":60},"end":{"line":52,"column":9}},"line":49}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[1,0],"7":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/controllers/orderItem_repository.ts","sources":["/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/controllers/orderItem_repository.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAQA,oEAAiD;AAWjD,MAAa,wBAAwB;IAC3B,OAAO;;YACT,OAAO,mBAAc,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACnC,CAAC;KAAA;IAEK,QAAQ,CAAC,EAAU;;YACrB,OAAO,mBAAc,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QACvC,CAAC;KAAA;IAEK,aAAa,CAAC,EAAU;;YAC1B,OAAO,mBAAc,CAAC,IAAI,CAAC,EAAE,QAAQ,EAAE,EAAE,EAAE,CAAC,CAAC;QACjD,CAAC;KAAA;IAEK,MAAM,CACR,OAA+B;;YAE/B,MAAM,SAAS,GAAG,IAAI,mBAAc,CAAC,OAAO,CAAC,CAAC;YAC9C,OAAO,SAAS,CAAC,IAAI,EAAE,CAAC;QAC5B,CAAC;KAAA;IAEK,UAAU,CACZ,EAAU,EACV,OAA+B;;YAE/B,yCAAyC;YACzC,MAAM,MAAM,GAAG,MAAM,mBAAc,CAAC,iBAAiB,CAAC,EAAE,EAAE,OAAO,EAAE;gBAC/D,GAAG,EAAE,IAAI;aACZ,CAAC,CAAC;YACH,OAAO,MAAM,IAAI,IAAI,CAAC;QAC1B,CAAC;KAAA;IAEK,UAAU,CAAC,EAAU;;YACvB,MAAM,MAAM,GAAG,MAAM,mBAAc,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC;YAC1D,OAAO,MAAM,IAAI,IAAI,CAAC;QAC1B,CAAC;KAAA;CACJ;AAnCD,4DAmCC","sourcesContent":["import type {\n    CreateOrderItemPayload,\n    GetOrderItemResponse,\n    GetOrderItemsResponse,\n    OrderItemData,\n    UpdateOrderItemPayload,\n} from '@lib/shared_types';\n\nimport OrderItemModel from '../models/orderItem';\n\ninterface IOrderItemRepository {\n    findAll(): Promise<GetOrderItemsResponse>;\n    findById(id: string): Promise<GetOrderItemResponse | null>;\n    findByOrderId(id: string): Promise<GetOrderItemsResponse>;\n    create(payload: CreateOrderItemPayload): Promise<Pick<OrderItemData, 'id'>>;\n    updateById(id: string, payload: UpdateOrderItemPayload): Promise<boolean>;\n    deleteById(id: string): Promise<boolean>;\n}\n\nexport class MongoOrderItemRepository implements IOrderItemRepository {\n    async findAll(): Promise<GetOrderItemsResponse> {\n        return OrderItemModel.find({});\n    }\n\n    async findById(id: string): Promise<GetOrderItemResponse | null> {\n        return OrderItemModel.findById(id);\n    }\n\n    async findByOrderId(id: string): Promise<GetOrderItemsResponse> {\n        return OrderItemModel.find({ order_id: id });\n    }\n\n    async create(\n        payload: CreateOrderItemPayload,\n    ): Promise<Pick<OrderItemData, 'id'>> {\n        const OrderItem = new OrderItemModel(payload);\n        return OrderItem.save();\n    }\n\n    async updateById(\n        id: string,\n        payload: UpdateOrderItemPayload,\n    ): Promise<boolean> {\n        // mongoose would ignore undefined values\n        const result = await OrderItemModel.findByIdAndUpdate(id, payload, {\n            new: true,\n        });\n        return result != null;\n    }\n\n    async deleteById(id: string): Promise<boolean> {\n        const result = await OrderItemModel.findByIdAndDelete(id);\n        return result != null;\n    }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"119168f0e986970d74cffd7bdfbdc75363e7faf3","contentHash":"f0d70a0eca13852776221f012169b1ae29748c371819e069c7ec350c0ca95f88"},"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/models/orderItem.ts":{"path":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/models/orderItem.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":19},"end":{"line":6,"column":55}},"4":{"start":{"line":7,"column":24},"end":{"line":28,"column":2}},"5":{"start":{"line":23,"column":12},"end":{"line":23,"column":40}},"6":{"start":{"line":24,"column":12},"end":{"line":24,"column":27}},"7":{"start":{"line":25,"column":12},"end":{"line":25,"column":27}},"8":{"start":{"line":29,"column":18},"end":{"line":29,"column":72}},"9":{"start":{"line":30,"column":0},"end":{"line":30,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":22,"column":19},"end":{"line":22,"column":20}},"loc":{"start":{"line":22,"column":31},"end":{"line":26,"column":9}},"line":22}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":1,"9":1},"f":{"0":1,"1":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/models/orderItem.ts","sources":["/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/models/orderItem.ts"],"names":[],"mappings":";;;;;AACA,wDAAgC;AAWhC,MAAM,eAAe,GAAG,IAAI,kBAAQ,CAAC,MAAM,CACvC;IACI,QAAQ,EAAE;QACN,IAAI,EAAE,MAAM;QACZ,GAAG,EAAE,OAAO;QACZ,QAAQ,EAAE,IAAI;KACjB;IACD,OAAO,EAAE;QACL,IAAI,EAAE,MAAM;QACZ,GAAG,EAAE,MAAM;QACX,QAAQ,EAAE,IAAI;KACjB;IACD,QAAQ,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;CAC7C,EACD;IACI,oBAAoB;IACpB,MAAM,EAAE;QACJ,SAAS,EAAE,CAAC,CAAC,EAAE,GAAG,EAAQ,EAAE;YACxB,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;YAC5B,OAAO,GAAG,CAAC,GAAG,CAAC;YACf,OAAO,GAAG,CAAC,GAAG,CAAC;QACnB,CAAC;KACJ;CACJ,CACJ,CAAC;AAEF,MAAM,SAAS,GAAG,kBAAQ,CAAC,KAAK,CAC5B,WAAW,EACX,eAAe,CAClB,CAAC;AAEF,kBAAe,SAAS,CAAC","sourcesContent":["import type { OrderItemData } from '@lib/shared_types';\nimport mongoose from 'mongoose';\nimport type { Types } from 'mongoose';\n\ninterface OrderItemDocument\n    extends Omit<OrderItemData, 'id'>,\n        mongoose.Document {\n    id: Types.ObjectId;\n}\n\ninterface OrderItemModel extends mongoose.Model<OrderItemDocument> {}\n\nconst OrderItemSchema = new mongoose.Schema<OrderItemDocument>(\n    {\n        order_id: {\n            type: String,\n            ref: 'Order',\n            required: true,\n        },\n        meal_id: {\n            type: String,\n            ref: 'Meal',\n            required: true,\n        },\n        quantity: { type: Number, required: true },\n    },\n    {\n        // timestamps: true,\n        toJSON: {\n            transform: (_, ret): void => {\n                ret.id = ret._id.toString();\n                delete ret._id;\n                delete ret.__v;\n            },\n        },\n    },\n);\n\nconst OrderItem = mongoose.model<OrderItemDocument, OrderItemModel>(\n    'OrderItem',\n    OrderItemSchema,\n);\n\nexport default OrderItem;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"911a919b10cf5694600fec3f6a140e77cd8acde9","contentHash":"28d8b98501c4d3c3b7ecdcfe6b5040025277e6240421560caf0ba0a1386aa96c"},"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/controllers/order_repository.ts":{"path":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/controllers/order_repository.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":38}},"16":{"start":{"line":16,"column":21},"end":{"line":16,"column":59}},"17":{"start":{"line":17,"column":16},"end":{"line":17,"column":59}},"18":{"start":{"line":18,"column":20},"end":{"line":18,"column":67}},"19":{"start":{"line":21,"column":8},"end":{"line":23,"column":11}},"20":{"start":{"line":22,"column":12},"end":{"line":22,"column":44}},"21":{"start":{"line":26,"column":8},"end":{"line":28,"column":11}},"22":{"start":{"line":27,"column":12},"end":{"line":27,"column":48}},"23":{"start":{"line":31,"column":8},"end":{"line":33,"column":11}},"24":{"start":{"line":32,"column":12},"end":{"line":32,"column":57}},"25":{"start":{"line":36,"column":8},"end":{"line":38,"column":11}},"26":{"start":{"line":37,"column":12},"end":{"line":37,"column":57}},"27":{"start":{"line":41,"column":8},"end":{"line":51,"column":11}},"28":{"start":{"line":42,"column":30},"end":{"line":42,"column":58}},"29":{"start":{"line":43,"column":28},"end":{"line":43,"column":52}},"30":{"start":{"line":44,"column":12},"end":{"line":50,"column":15}},"31":{"start":{"line":54,"column":8},"end":{"line":57,"column":11}},"32":{"start":{"line":55,"column":26},"end":{"line":55,"column":54}},"33":{"start":{"line":56,"column":12},"end":{"line":56,"column":32}},"34":{"start":{"line":60,"column":8},"end":{"line":70,"column":11}},"35":{"start":{"line":61,"column":30},"end":{"line":61,"column":58}},"36":{"start":{"line":62,"column":28},"end":{"line":62,"column":52}},"37":{"start":{"line":63,"column":12},"end":{"line":69,"column":15}},"38":{"start":{"line":73,"column":8},"end":{"line":79,"column":11}},"39":{"start":{"line":75,"column":27},"end":{"line":77,"column":14}},"40":{"start":{"line":78,"column":12},"end":{"line":78,"column":34}},"41":{"start":{"line":82,"column":8},"end":{"line":85,"column":11}},"42":{"start":{"line":83,"column":27},"end":{"line":83,"column":70}},"43":{"start":{"line":84,"column":12},"end":{"line":84,"column":34}},"44":{"start":{"line":88,"column":8},"end":{"line":115,"column":11}},"45":{"start":{"line":89,"column":12},"end":{"line":114,"column":13}},"46":{"start":{"line":90,"column":30},"end":{"line":90,"column":64}},"47":{"start":{"line":91,"column":16},"end":{"line":93,"column":17}},"48":{"start":{"line":92,"column":20},"end":{"line":92,"column":32}},"49":{"start":{"line":94,"column":35},"end":{"line":94,"column":83}},"50":{"start":{"line":95,"column":37},"end":{"line":108,"column":17}},"51":{"start":{"line":102,"column":59},"end":{"line":107,"column":21}},"52":{"start":{"line":109,"column":16},"end":{"line":109,"column":36}},"53":{"start":{"line":112,"column":16},"end":{"line":112,"column":68}},"54":{"start":{"line":113,"column":16},"end":{"line":113,"column":28}},"55":{"start":{"line":118,"column":8},"end":{"line":169,"column":11}},"56":{"start":{"line":119,"column":12},"end":{"line":168,"column":13}},"57":{"start":{"line":120,"column":16},"end":{"line":123,"column":17}},"58":{"start":{"line":121,"column":20},"end":{"line":121,"column":61}},"59":{"start":{"line":122,"column":20},"end":{"line":122,"column":33}},"60":{"start":{"line":124,"column":16},"end":{"line":127,"column":17}},"61":{"start":{"line":125,"column":20},"end":{"line":125,"column":66}},"62":{"start":{"line":126,"column":20},"end":{"line":126,"column":33}},"63":{"start":{"line":128,"column":36},"end":{"line":135,"column":18}},"64":{"start":{"line":136,"column":30},"end":{"line":136,"column":32}},"65":{"start":{"line":137,"column":27},"end":{"line":137,"column":29}},"66":{"start":{"line":138,"column":16},"end":{"line":156,"column":17}},"67":{"start":{"line":140,"column":24},"end":{"line":140,"column":63}},"68":{"start":{"line":141,"column":24},"end":{"line":142,"column":109}},"69":{"start":{"line":143,"column":24},"end":{"line":143,"column":30}},"70":{"start":{"line":145,"column":24},"end":{"line":145,"column":57}},"71":{"start":{"line":146,"column":24},"end":{"line":147,"column":83}},"72":{"start":{"line":148,"column":24},"end":{"line":148,"column":30}},"73":{"start":{"line":150,"column":24},"end":{"line":150,"column":65}},"74":{"start":{"line":151,"column":24},"end":{"line":152,"column":106}},"75":{"start":{"line":153,"column":24},"end":{"line":153,"column":30}},"76":{"start":{"line":155,"column":24},"end":{"line":155,"column":37}},"77":{"start":{"line":157,"column":16},"end":{"line":162,"column":19}},"78":{"start":{"line":163,"column":16},"end":{"line":163,"column":28}},"79":{"start":{"line":166,"column":16},"end":{"line":166,"column":61}},"80":{"start":{"line":167,"column":16},"end":{"line":167,"column":29}},"81":{"start":{"line":172,"column":8},"end":{"line":218,"column":11}},"82":{"start":{"line":173,"column":12},"end":{"line":217,"column":13}},"83":{"start":{"line":174,"column":16},"end":{"line":177,"column":17}},"84":{"start":{"line":175,"column":20},"end":{"line":175,"column":61}},"85":{"start":{"line":176,"column":20},"end":{"line":176,"column":33}},"86":{"start":{"line":178,"column":16},"end":{"line":181,"column":17}},"87":{"start":{"line":179,"column":20},"end":{"line":179,"column":66}},"88":{"start":{"line":180,"column":20},"end":{"line":180,"column":33}},"89":{"start":{"line":182,"column":36},"end":{"line":189,"column":18}},"90":{"start":{"line":190,"column":30},"end":{"line":190,"column":32}},"91":{"start":{"line":191,"column":27},"end":{"line":191,"column":29}},"92":{"start":{"line":192,"column":16},"end":{"line":205,"column":17}},"93":{"start":{"line":194,"column":24},"end":{"line":194,"column":63}},"94":{"start":{"line":195,"column":24},"end":{"line":196,"column":112}},"95":{"start":{"line":197,"column":24},"end":{"line":197,"column":30}},"96":{"start":{"line":199,"column":24},"end":{"line":199,"column":59}},"97":{"start":{"line":200,"column":24},"end":{"line":201,"column":99}},"98":{"start":{"line":202,"column":24},"end":{"line":202,"column":30}},"99":{"start":{"line":204,"column":24},"end":{"line":204,"column":37}},"100":{"start":{"line":206,"column":16},"end":{"line":211,"column":19}},"101":{"start":{"line":212,"column":16},"end":{"line":212,"column":28}},"102":{"start":{"line":215,"column":16},"end":{"line":215,"column":61}},"103":{"start":{"line":216,"column":16},"end":{"line":216,"column":29}},"104":{"start":{"line":221,"column":0},"end":{"line":221,"column":52}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":20,"column":4},"end":{"line":20,"column":5}},"loc":{"start":{"line":20,"column":14},"end":{"line":24,"column":5}},"line":20},"9":{"name":"(anonymous_9)","decl":{"start":{"line":21,"column":47},"end":{"line":21,"column":48}},"loc":{"start":{"line":21,"column":60},"end":{"line":23,"column":9}},"line":21},"10":{"name":"(anonymous_10)","decl":{"start":{"line":25,"column":4},"end":{"line":25,"column":5}},"loc":{"start":{"line":25,"column":17},"end":{"line":29,"column":5}},"line":25},"11":{"name":"(anonymous_11)","decl":{"start":{"line":26,"column":47},"end":{"line":26,"column":48}},"loc":{"start":{"line":26,"column":60},"end":{"line":28,"column":9}},"line":26},"12":{"name":"(anonymous_12)","decl":{"start":{"line":30,"column":4},"end":{"line":30,"column":5}},"loc":{"start":{"line":30,"column":21},"end":{"line":34,"column":5}},"line":30},"13":{"name":"(anonymous_13)","decl":{"start":{"line":31,"column":47},"end":{"line":31,"column":48}},"loc":{"start":{"line":31,"column":60},"end":{"line":33,"column":9}},"line":31},"14":{"name":"(anonymous_14)","decl":{"start":{"line":35,"column":4},"end":{"line":35,"column":5}},"loc":{"start":{"line":35,"column":21},"end":{"line":39,"column":5}},"line":35},"15":{"name":"(anonymous_15)","decl":{"start":{"line":36,"column":47},"end":{"line":36,"column":48}},"loc":{"start":{"line":36,"column":60},"end":{"line":38,"column":9}},"line":36},"16":{"name":"(anonymous_16)","decl":{"start":{"line":40,"column":4},"end":{"line":40,"column":5}},"loc":{"start":{"line":40,"column":39},"end":{"line":52,"column":5}},"line":40},"17":{"name":"(anonymous_17)","decl":{"start":{"line":41,"column":47},"end":{"line":41,"column":48}},"loc":{"start":{"line":41,"column":60},"end":{"line":51,"column":9}},"line":41},"18":{"name":"(anonymous_18)","decl":{"start":{"line":53,"column":4},"end":{"line":53,"column":5}},"loc":{"start":{"line":53,"column":20},"end":{"line":58,"column":5}},"line":53},"19":{"name":"(anonymous_19)","decl":{"start":{"line":54,"column":47},"end":{"line":54,"column":48}},"loc":{"start":{"line":54,"column":60},"end":{"line":57,"column":9}},"line":54},"20":{"name":"(anonymous_20)","decl":{"start":{"line":59,"column":4},"end":{"line":59,"column":5}},"loc":{"start":{"line":59,"column":39},"end":{"line":71,"column":5}},"line":59},"21":{"name":"(anonymous_21)","decl":{"start":{"line":60,"column":47},"end":{"line":60,"column":48}},"loc":{"start":{"line":60,"column":60},"end":{"line":70,"column":9}},"line":60},"22":{"name":"(anonymous_22)","decl":{"start":{"line":72,"column":4},"end":{"line":72,"column":5}},"loc":{"start":{"line":72,"column":28},"end":{"line":80,"column":5}},"line":72},"23":{"name":"(anonymous_23)","decl":{"start":{"line":73,"column":47},"end":{"line":73,"column":48}},"loc":{"start":{"line":73,"column":60},"end":{"line":79,"column":9}},"line":73},"24":{"name":"(anonymous_24)","decl":{"start":{"line":81,"column":4},"end":{"line":81,"column":5}},"loc":{"start":{"line":81,"column":19},"end":{"line":86,"column":5}},"line":81},"25":{"name":"(anonymous_25)","decl":{"start":{"line":82,"column":47},"end":{"line":82,"column":48}},"loc":{"start":{"line":82,"column":60},"end":{"line":85,"column":9}},"line":82},"26":{"name":"(anonymous_26)","decl":{"start":{"line":87,"column":4},"end":{"line":87,"column":5}},"loc":{"start":{"line":87,"column":29},"end":{"line":116,"column":5}},"line":87},"27":{"name":"(anonymous_27)","decl":{"start":{"line":88,"column":47},"end":{"line":88,"column":48}},"loc":{"start":{"line":88,"column":60},"end":{"line":115,"column":9}},"line":88},"28":{"name":"(anonymous_28)","decl":{"start":{"line":102,"column":48},"end":{"line":102,"column":49}},"loc":{"start":{"line":102,"column":59},"end":{"line":107,"column":21}},"line":102},"29":{"name":"(anonymous_29)","decl":{"start":{"line":117,"column":4},"end":{"line":117,"column":5}},"loc":{"start":{"line":117,"column":44},"end":{"line":170,"column":5}},"line":117},"30":{"name":"(anonymous_30)","decl":{"start":{"line":118,"column":47},"end":{"line":118,"column":48}},"loc":{"start":{"line":118,"column":60},"end":{"line":169,"column":9}},"line":118},"31":{"name":"(anonymous_31)","decl":{"start":{"line":171,"column":4},"end":{"line":171,"column":5}},"loc":{"start":{"line":171,"column":44},"end":{"line":219,"column":5}},"line":171},"32":{"name":"(anonymous_32)","decl":{"start":{"line":172,"column":47},"end":{"line":172,"column":48}},"loc":{"start":{"line":172,"column":60},"end":{"line":218,"column":9}},"line":172}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":91,"column":16},"end":{"line":93,"column":17}},"type":"if","locations":[{"start":{"line":91,"column":16},"end":{"line":93,"column":17}},{"start":{"line":91,"column":16},"end":{"line":93,"column":17}}],"line":91},"9":{"loc":{"start":{"line":120,"column":16},"end":{"line":123,"column":17}},"type":"if","locations":[{"start":{"line":120,"column":16},"end":{"line":123,"column":17}},{"start":{"line":120,"column":16},"end":{"line":123,"column":17}}],"line":120},"10":{"loc":{"start":{"line":120,"column":20},"end":{"line":120,"column":67}},"type":"binary-expr","locations":[{"start":{"line":120,"column":20},"end":{"line":120,"column":38}},{"start":{"line":120,"column":42},"end":{"line":120,"column":67}}],"line":120},"11":{"loc":{"start":{"line":124,"column":16},"end":{"line":127,"column":17}},"type":"if","locations":[{"start":{"line":124,"column":16},"end":{"line":127,"column":17}},{"start":{"line":124,"column":16},"end":{"line":127,"column":17}}],"line":124},"12":{"loc":{"start":{"line":124,"column":20},"end":{"line":124,"column":77}},"type":"binary-expr","locations":[{"start":{"line":124,"column":20},"end":{"line":124,"column":43}},{"start":{"line":124,"column":47},"end":{"line":124,"column":77}}],"line":124},"13":{"loc":{"start":{"line":138,"column":16},"end":{"line":156,"column":17}},"type":"switch","locations":[{"start":{"line":139,"column":20},"end":{"line":143,"column":30}},{"start":{"line":144,"column":20},"end":{"line":148,"column":30}},{"start":{"line":149,"column":20},"end":{"line":153,"column":30}},{"start":{"line":154,"column":20},"end":{"line":155,"column":37}}],"line":138},"14":{"loc":{"start":{"line":174,"column":16},"end":{"line":177,"column":17}},"type":"if","locations":[{"start":{"line":174,"column":16},"end":{"line":177,"column":17}},{"start":{"line":174,"column":16},"end":{"line":177,"column":17}}],"line":174},"15":{"loc":{"start":{"line":174,"column":20},"end":{"line":174,"column":67}},"type":"binary-expr","locations":[{"start":{"line":174,"column":20},"end":{"line":174,"column":38}},{"start":{"line":174,"column":42},"end":{"line":174,"column":67}}],"line":174},"16":{"loc":{"start":{"line":178,"column":16},"end":{"line":181,"column":17}},"type":"if","locations":[{"start":{"line":178,"column":16},"end":{"line":181,"column":17}},{"start":{"line":178,"column":16},"end":{"line":181,"column":17}}],"line":178},"17":{"loc":{"start":{"line":178,"column":20},"end":{"line":178,"column":77}},"type":"binary-expr","locations":[{"start":{"line":178,"column":20},"end":{"line":178,"column":43}},{"start":{"line":178,"column":47},"end":{"line":178,"column":77}}],"line":178},"18":{"loc":{"start":{"line":192,"column":16},"end":{"line":205,"column":17}},"type":"switch","locations":[{"start":{"line":193,"column":20},"end":{"line":197,"column":30}},{"start":{"line":198,"column":20},"end":{"line":202,"column":30}},{"start":{"line":203,"column":20},"end":{"line":204,"column":37}}],"line":192}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":3,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":3,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[2,1],"7":[3,3],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0,0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0,0]},"inputSourceMap":{"version":3,"file":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/controllers/order_repository.ts","sources":["/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/controllers/order_repository.ts"],"names":[],"mappings":"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","sourcesContent":["import type {\n    CreateOrderPayload,\n    GetOrderResponse,\n    GetOrdersResponse,\n    OrderData,\n    UpdateOrderPayload,\n} from '@lib/shared_types';\nimport nodemailer from 'nodemailer';\n\nimport type { OrderStatus } from '../../../lib/shared_types';\nimport OrderModel from '../models/order';\nimport OrderItemModel from '../models/orderItem';\n\ninterface IOrderRepository {\n    findAll(): Promise<GetOrdersResponse>;\n    findById(id: string): Promise<GetOrderResponse | null>;\n    findByUserId(id: string): Promise<GetOrdersResponse>;\n    findByShopId(id: string): Promise<GetOrdersResponse>;\n    findByUserIdMonth(\n        id: string,\n        year: number,\n        month: number,\n    ): Promise<GetOrdersResponse>;\n    create(payload: CreateOrderPayload): Promise<Pick<OrderData, 'id'>>;\n    updateById(id: string, payload: UpdateOrderPayload): Promise<boolean>;\n    deleteById(id: string): Promise<boolean>;\n}\n\nexport class MongoOrderRepository implements IOrderRepository {\n    async findAll(): Promise<GetOrdersResponse> {\n        return OrderModel.find({});\n    }\n\n    async findById(id: string): Promise<GetOrderResponse | null> {\n        return OrderModel.findById(id);\n    }\n\n    async findByUserId(id: string): Promise<GetOrdersResponse> {\n        return OrderModel.find({ user_id: id });\n    }\n\n    async findByShopId(id: string): Promise<GetOrdersResponse> {\n        return OrderModel.find({ shop_id: id });\n    }\n\n    async findByUserIdMonth(\n        id: string,\n        year: number,\n        month: number,\n    ): Promise<GetOrdersResponse> {\n        const startDate = new Date(year, month - 1, 1);\n        const endDate = new Date(year, month, 0);\n\n        return OrderModel.find({\n            user_id: id,\n            order_date: {\n                $gte: startDate,\n                $lte: endDate,\n            },\n        });\n    }\n\n    async create(payload: CreateOrderPayload): Promise<Pick<OrderData, 'id'>> {\n        const order = new OrderModel(payload);\n        return order.save();\n    }\n\n    async findByShopIdMonth(\n        id: string,\n        year: number,\n        month: number,\n    ): Promise<GetOrdersResponse> {\n        const startDate = new Date(year, month - 1, 1);\n        const endDate = new Date(year, month, 0);\n\n        return OrderModel.find({\n            shop_id: id,\n            order_date: {\n                $gte: startDate,\n                $lte: endDate,\n            },\n        });\n    }\n\n    async updateById(\n        id: string,\n        payload: UpdateOrderPayload,\n    ): Promise<boolean> {\n        // mongoose would ignore undefined values\n        const result = await OrderModel.findByIdAndUpdate(id, payload, {\n            new: true,\n        });\n        return result != null;\n    }\n\n    async deleteById(id: string): Promise<boolean> {\n        const result = await OrderModel.findByIdAndDelete(id);\n        return result != null;\n    }\n\n    async findDetailsByOrderId(id: string): Promise<GetOrderResponse | null> {\n        try {\n            const order = await OrderModel.findById(id);\n\n            if (!order) {\n                return null;\n            }\n\n            const orderItems = await OrderItemModel.find({ order_id: id });\n            const orderDetails: GetOrderResponse = {\n                id: order.id,\n                user_id: order.user_id,\n                shop_id: order.shop_id,\n                order_date: order.order_date.toISOString(),\n                status: order.status,\n                remark: order.remark,\n                order_items: orderItems.map((item) => ({\n                    id: item.id,\n                    order_id: item.order_id,\n                    meal_id: item.meal_id,\n                    quantity: item.quantity,\n                })),\n            };\n\n            return orderDetails;\n        } catch (error) {\n            console.error('Error finding order detail:', error);\n            return null;\n        }\n    }\n\n    async sendEmailToUser(\n        userEmail: string,\n        orderStatus: OrderStatus,\n    ): Promise<boolean> {\n        try {\n            if (!process.env.GMAIL || !process.env.GMAIL.trim()) {\n                console.error('Gmail not found in .env');\n                return false;\n            }\n\n            if (!process.env.GMAIL_PASS || !process.env.GMAIL_PASS.trim()) {\n                console.error('Gmail pass not found in .env');\n                return false;\n            }\n\n            const transporter = nodemailer.createTransport({\n                host: 'smtp.gmail.com',\n                port: 465,\n                auth: {\n                    user: process.env.GMAIL,\n                    pass: process.env.GMAIL_PASS, // Input your Gmail 2-step verification app password\n                },\n            });\n\n            let subject = '';\n            let html = '';\n\n            switch (orderStatus) {\n                case 'inprogress':\n                    subject = 'Your order is in progress!';\n                    html =\n                        'Your order is now in progress. We will notify you once it is ready for pickup.';\n                    break;\n                case 'ready':\n                    subject = 'Your order is ready!';\n                    html =\n                        'Your order is now ready for pickup. Enjoy your meal!';\n                    break;\n                case 'cancelled':\n                    subject = 'Your order has been canceled';\n                    html =\n                        'Your order has been canceled. If you have any questions, please contact us.';\n                    break;\n                default:\n                    return false;\n            }\n\n            await transporter.sendMail({\n                from: process.env.GMAIL,\n                to: userEmail,\n                subject,\n                html,\n            });\n\n            return true;\n        } catch (error) {\n            console.error('Error sending email:', error);\n            return false;\n        }\n    }\n\n    async sendEmailToShop(\n        shopEmail: string,\n        orderStatus: OrderStatus,\n    ): Promise<boolean> {\n        try {\n            if (!process.env.GMAIL || !process.env.GMAIL.trim()) {\n                console.error('Gmail not found in .env');\n                return false;\n            }\n\n            if (!process.env.GMAIL_PASS || !process.env.GMAIL_PASS.trim()) {\n                console.error('Gmail pass not found in .env');\n                return false;\n            }\n\n            const transporter = nodemailer.createTransport({\n                host: 'smtp.gmail.com',\n                port: 465,\n                auth: {\n                    user: process.env.GMAIL,\n                    pass: process.env.GMAIL_PASS,\n                },\n            });\n\n            let subject = '';\n            let html = '';\n\n            switch (orderStatus) {\n                case 'waiting':\n                    subject = 'New order for confirmation';\n                    html =\n                        'A new order is waiting for confirmation. Please check your dashboard for details.';\n                    break;\n                case 'cancelled':\n                    subject = 'New order cancellation';\n                    html =\n                        'An order has been canceled. Please check your dashboard for details.';\n                    break;\n                default:\n                    return false;\n            }\n\n            await transporter.sendMail({\n                from: process.env.GMAIL,\n                to: shopEmail,\n                subject,\n                html,\n            });\n\n            return true;\n        } catch (error) {\n            console.error('Error sending email:', error);\n            return false;\n        }\n    }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ed483934fa37d89f959b63032b508ef1b7448081","contentHash":"9f01661c558343fdb867028cd9619efaf30a3185e939e63c078341e341045139"},"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/models/order.ts":{"path":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/models/order.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":19},"end":{"line":6,"column":55}},"4":{"start":{"line":7,"column":23},"end":{"line":7,"column":59}},"5":{"start":{"line":8,"column":20},"end":{"line":36,"column":2}},"6":{"start":{"line":31,"column":12},"end":{"line":31,"column":40}},"7":{"start":{"line":32,"column":12},"end":{"line":32,"column":27}},"8":{"start":{"line":33,"column":12},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":14},"end":{"line":37,"column":60}},"10":{"start":{"line":38,"column":0},"end":{"line":38,"column":24}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":30,"column":19},"end":{"line":30,"column":20}},"loc":{"start":{"line":30,"column":31},"end":{"line":34,"column":9}},"line":30}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":1,"10":1},"f":{"0":1,"1":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/models/order.ts","sources":["/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/models/order.ts"],"names":[],"mappings":";;;;;AACA,wDAAgC;AAGhC,4DAAwD;AAWxD,MAAM,WAAW,GAAG,IAAI,kBAAQ,CAAC,MAAM,CACnC;IACI,OAAO,EAAE;QACL,IAAI,EAAE,MAAM;QACZ,GAAG,EAAE,MAAM;QACX,QAAQ,EAAE,IAAI;KACjB;IACD,OAAO,EAAE;QACL,IAAI,EAAE,MAAM;QACZ,GAAG,EAAE,MAAM;QACX,QAAQ,EAAE,IAAI;KACjB;IACD,UAAU,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC1C,MAAM,EAAE;QACJ,IAAI,EAAE,MAAM;QACZ,QAAQ,EAAE,IAAI;QACd,IAAI,EAAE,MAAM,CAAC,MAAM,CAAC,0BAAW,CAAC;QAChC,OAAO,EAAE,0BAAW,CAAC,IAAI;KAC5B;IACD,MAAM,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE;CAC5C,EACD;IACI,oBAAoB;IACpB,MAAM,EAAE;QACJ,SAAS,EAAE,CAAC,CAAC,EAAE,GAAG,EAAQ,EAAE;YACxB,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;YAC5B,OAAO,GAAG,CAAC,GAAG,CAAC;YACf,OAAO,GAAG,CAAC,GAAG,CAAC;QACnB,CAAC;KACJ;CACJ,CACJ,CAAC;AAEF,MAAM,KAAK,GAAG,kBAAQ,CAAC,KAAK,CAA4B,OAAO,EAAE,WAAW,CAAC,CAAC;AAE9E,kBAAe,KAAK,CAAC","sourcesContent":["import { type OrderData } from '@lib/shared_types';\nimport mongoose from 'mongoose';\nimport type { Types } from 'mongoose';\n\nimport { OrderStatus } from '../../../lib/shared_types';\n\ninterface OrderDocument\n    extends Omit<OrderData, 'id' | 'order_date'>,\n        mongoose.Document {\n    id: Types.ObjectId;\n    order_date: Date;\n}\n\ninterface OrderModel extends mongoose.Model<OrderDocument> {}\n\nconst OrderSchema = new mongoose.Schema<OrderDocument>(\n    {\n        user_id: {\n            type: String,\n            ref: 'User',\n            required: true,\n        },\n        shop_id: {\n            type: String,\n            ref: 'Shop',\n            required: true,\n        },\n        order_date: { type: Date, required: true },\n        status: {\n            type: String,\n            required: true,\n            enum: Object.values(OrderStatus),\n            default: OrderStatus.CART,\n        },\n        remark: { type: String, required: false },\n    },\n    {\n        // timestamps: true,\n        toJSON: {\n            transform: (_, ret): void => {\n                ret.id = ret._id.toString();\n                delete ret._id;\n                delete ret.__v;\n            },\n        },\n    },\n);\n\nconst Order = mongoose.model<OrderDocument, OrderModel>('Order', OrderSchema);\n\nexport default Order;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2fea6ad3eeffbedce43a82cb3a6192f870d2ef57","contentHash":"efe38ed7ba5b5a7feb7e7f7b6de3b374b65e2ca7814a5c047eef610d4eb754d1"},"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/controllers/shop_repository.ts":{"path":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/controllers/shop_repository.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":37}},"16":{"start":{"line":16,"column":15},"end":{"line":16,"column":57}},"17":{"start":{"line":19,"column":8},"end":{"line":21,"column":11}},"18":{"start":{"line":20,"column":12},"end":{"line":20,"column":43}},"19":{"start":{"line":24,"column":8},"end":{"line":26,"column":11}},"20":{"start":{"line":25,"column":12},"end":{"line":25,"column":63}},"21":{"start":{"line":29,"column":8},"end":{"line":31,"column":11}},"22":{"start":{"line":30,"column":12},"end":{"line":30,"column":47}},"23":{"start":{"line":34,"column":8},"end":{"line":39,"column":11}},"24":{"start":{"line":35,"column":31},"end":{"line":35,"column":68}},"25":{"start":{"line":36,"column":12},"end":{"line":37,"column":28}},"26":{"start":{"line":37,"column":16},"end":{"line":37,"column":28}},"27":{"start":{"line":38,"column":12},"end":{"line":38,"column":25}},"28":{"start":{"line":42,"column":8},"end":{"line":45,"column":11}},"29":{"start":{"line":43,"column":25},"end":{"line":43,"column":65}},"30":{"start":{"line":44,"column":12},"end":{"line":44,"column":35}},"31":{"start":{"line":48,"column":8},"end":{"line":54,"column":11}},"32":{"start":{"line":50,"column":27},"end":{"line":52,"column":14}},"33":{"start":{"line":53,"column":12},"end":{"line":53,"column":34}},"34":{"start":{"line":57,"column":8},"end":{"line":60,"column":11}},"35":{"start":{"line":58,"column":27},"end":{"line":58,"column":69}},"36":{"start":{"line":59,"column":12},"end":{"line":59,"column":34}},"37":{"start":{"line":63,"column":0},"end":{"line":63,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":18,"column":4},"end":{"line":18,"column":5}},"loc":{"start":{"line":18,"column":14},"end":{"line":22,"column":5}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":19,"column":47},"end":{"line":19,"column":48}},"loc":{"start":{"line":19,"column":60},"end":{"line":21,"column":9}},"line":19},"10":{"name":"(anonymous_10)","decl":{"start":{"line":23,"column":4},"end":{"line":23,"column":5}},"loc":{"start":{"line":23,"column":32},"end":{"line":27,"column":5}},"line":23},"11":{"name":"(anonymous_11)","decl":{"start":{"line":24,"column":47},"end":{"line":24,"column":48}},"loc":{"start":{"line":24,"column":60},"end":{"line":26,"column":9}},"line":24},"12":{"name":"(anonymous_12)","decl":{"start":{"line":28,"column":4},"end":{"line":28,"column":5}},"loc":{"start":{"line":28,"column":17},"end":{"line":32,"column":5}},"line":28},"13":{"name":"(anonymous_13)","decl":{"start":{"line":29,"column":47},"end":{"line":29,"column":48}},"loc":{"start":{"line":29,"column":60},"end":{"line":31,"column":9}},"line":29},"14":{"name":"(anonymous_14)","decl":{"start":{"line":33,"column":4},"end":{"line":33,"column":5}},"loc":{"start":{"line":33,"column":23},"end":{"line":40,"column":5}},"line":33},"15":{"name":"(anonymous_15)","decl":{"start":{"line":34,"column":47},"end":{"line":34,"column":48}},"loc":{"start":{"line":34,"column":60},"end":{"line":39,"column":9}},"line":34},"16":{"name":"(anonymous_16)","decl":{"start":{"line":41,"column":4},"end":{"line":41,"column":5}},"loc":{"start":{"line":41,"column":20},"end":{"line":46,"column":5}},"line":41},"17":{"name":"(anonymous_17)","decl":{"start":{"line":42,"column":47},"end":{"line":42,"column":48}},"loc":{"start":{"line":42,"column":60},"end":{"line":45,"column":9}},"line":42},"18":{"name":"(anonymous_18)","decl":{"start":{"line":47,"column":4},"end":{"line":47,"column":5}},"loc":{"start":{"line":47,"column":28},"end":{"line":55,"column":5}},"line":47},"19":{"name":"(anonymous_19)","decl":{"start":{"line":48,"column":47},"end":{"line":48,"column":48}},"loc":{"start":{"line":48,"column":60},"end":{"line":54,"column":9}},"line":48},"20":{"name":"(anonymous_20)","decl":{"start":{"line":56,"column":4},"end":{"line":56,"column":5}},"loc":{"start":{"line":56,"column":19},"end":{"line":61,"column":5}},"line":56},"21":{"name":"(anonymous_21)","decl":{"start":{"line":57,"column":47},"end":{"line":57,"column":48}},"loc":{"start":{"line":57,"column":60},"end":{"line":60,"column":9}},"line":57}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":36,"column":12},"end":{"line":37,"column":28}},"type":"if","locations":[{"start":{"line":36,"column":12},"end":{"line":37,"column":28}},{"start":{"line":36,"column":12},"end":{"line":37,"column":28}}],"line":36}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/controllers/shop_repository.ts","sources":["/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/controllers/shop_repository.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAQA,0DAAuC;AAYvC,MAAa,mBAAmB;IACtB,OAAO;;YACT,OAAO,cAAS,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAC9B,CAAC;KAAA;IAEK,iBAAiB,CACnB,QAAgB;;YAEhB,OAAO,cAAS,CAAC,IAAI,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,CAAC;QAClD,CAAC;KAAA;IAEK,QAAQ,CAAC,EAAU;;YACrB,OAAO,cAAS,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAClC,CAAC;KAAA;IAEK,YAAY,CAAC,IAAY;;YAC3B,MAAM,UAAU,GAAG,MAAM,cAAS,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;YACpD,IAAI,UAAU;gBAAE,OAAO,IAAI,CAAC;YAC5B,OAAO,KAAK,CAAC;QACjB,CAAC;KAAA;IAEK,MAAM,CAAC,OAA0B;;YACnC,MAAM,IAAI,GAAG,MAAM,IAAI,cAAS,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,CAAC;YACjD,OAAO,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC;QAC3B,CAAC;KAAA;IAEK,UAAU,CAAC,EAAU,EAAE,OAA0B;;YACnD,yCAAyC;YACzC,MAAM,MAAM,GAAG,MAAM,cAAS,CAAC,iBAAiB,CAAC,EAAE,EAAE,OAAO,EAAE;gBAC1D,GAAG,EAAE,IAAI;aACZ,CAAC,CAAC;YACH,OAAO,MAAM,IAAI,IAAI,CAAC;QAC1B,CAAC;KAAA;IAEK,UAAU,CAAC,EAAU;;YACvB,MAAM,MAAM,GAAG,MAAM,cAAS,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC;YACrD,OAAO,MAAM,IAAI,IAAI,CAAC;QAC1B,CAAC;KAAA;CACJ;AAtCD,kDAsCC","sourcesContent":["import type {\n    CreateShopPayload,\n    CreateShopResponse,\n    GetShopResponse,\n    GetShopsResponse,\n    UpdateShopPayload,\n} from '@lib/shared_types';\n\nimport ShopModel from '../models/shop';\n\ninterface IShopRepository {\n    findAll(): Promise<GetShopsResponse>;\n    findAllByCategory(id: string): Promise<GetShopsResponse | null>;\n    findById(id: string): Promise<GetShopResponse | null>;\n    existsByName(name: string): Promise<boolean>;\n    create(payload: CreateShopPayload): Promise<CreateShopResponse>;\n    updateById(id: string, payload: UpdateShopPayload): Promise<boolean>;\n    deleteById(id: string): Promise<boolean>;\n}\n\nexport class MongoShopRepository implements IShopRepository {\n    async findAll(): Promise<GetShopsResponse> {\n        return ShopModel.find({});\n    }\n\n    async findAllByCategory(\n        category: string,\n    ): Promise<GetShopsResponse | null> {\n        return ShopModel.find({ category: category });\n    }\n\n    async findById(id: string): Promise<GetShopResponse | null> {\n        return ShopModel.findById(id);\n    }\n\n    async existsByName(name: string): Promise<boolean> {\n        const shopExists = await ShopModel.exists({ name });\n        if (shopExists) return true;\n        return false;\n    }\n\n    async create(payload: CreateShopPayload): Promise<CreateShopResponse> {\n        const shop = await new ShopModel(payload).save();\n        return { id: shop.id };\n    }\n\n    async updateById(id: string, payload: UpdateShopPayload): Promise<boolean> {\n        // mongoose would ignore undefined values\n        const result = await ShopModel.findByIdAndUpdate(id, payload, {\n            new: true,\n        });\n        return result != null;\n    }\n\n    async deleteById(id: string): Promise<boolean> {\n        const result = await ShopModel.findByIdAndDelete(id);\n        return result != null;\n    }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"210a9ff7c4f79c20505b9e945cef06b34feecf21","contentHash":"b4dd61e1ec59d6e8da0e9256e520a1e6ce149377fd2d8030fdc1ed51fc03dc77"},"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/models/shop.ts":{"path":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/models/shop.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":19},"end":{"line":6,"column":55}},"4":{"start":{"line":7,"column":19},"end":{"line":35,"column":2}},"5":{"start":{"line":29,"column":12},"end":{"line":29,"column":40}},"6":{"start":{"line":30,"column":12},"end":{"line":30,"column":49}},"7":{"start":{"line":31,"column":12},"end":{"line":31,"column":27}},"8":{"start":{"line":32,"column":12},"end":{"line":32,"column":27}},"9":{"start":{"line":36,"column":13},"end":{"line":36,"column":57}},"10":{"start":{"line":37,"column":0},"end":{"line":37,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":28,"column":19},"end":{"line":28,"column":20}},"loc":{"start":{"line":28,"column":31},"end":{"line":33,"column":9}},"line":28}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":1,"10":1},"f":{"0":1,"1":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/models/shop.ts","sources":["/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/models/shop.ts"],"names":[],"mappings":";;;;;AACA,wDAAgC;AAUhC,MAAM,UAAU,GAAG,IAAI,kBAAQ,CAAC,MAAM,CAClC;IACI,OAAO,EAAE;QACL,IAAI,EAAE,MAAM;QACZ,GAAG,EAAE,MAAM;QACX,QAAQ,EAAE,IAAI;KACjB;IACD,IAAI,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACtC,OAAO,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACzC,KAAK,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACvC,KAAK,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACvC,QAAQ,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC1C,MAAM,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACxC,OAAO,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACzC,SAAS,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC3C,QAAQ,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC1C,MAAM,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACxC,QAAQ,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC1C,MAAM,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;CAC3C,EACD;IACI,UAAU,EAAE,IAAI;IAChB,MAAM,EAAE;QACJ,SAAS,EAAE,CAAC,CAAC,EAAE,GAAG,EAAQ,EAAE;YACxB,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;YAC5B,GAAG,CAAC,OAAO,GAAG,GAAG,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YACrC,OAAO,GAAG,CAAC,GAAG,CAAC;YACf,OAAO,GAAG,CAAC,GAAG,CAAC;QACnB,CAAC;KACJ;CACJ,CACJ,CAAC;AAEF,MAAM,IAAI,GAAG,kBAAQ,CAAC,KAAK,CAA0B,MAAM,EAAE,UAAU,CAAC,CAAC;AAEzE,kBAAe,IAAI,CAAC","sourcesContent":["import type { ShopData } from '@lib/shared_types';\nimport mongoose from 'mongoose';\n\ninterface ShopDocument\n    extends Omit<ShopData, 'id' | 'user_id'>,\n        mongoose.Document {\n    user_id: string;\n}\n\ninterface ShopModel extends mongoose.Model<ShopDocument> {}\n\nconst ShopSchema = new mongoose.Schema<ShopDocument>(\n    {\n        user_id: {\n            type: String,\n            ref: 'User',\n            required: true,\n        },\n        name: { type: String, required: true },\n        address: { type: String, required: true },\n        phone: { type: String, required: true },\n        image: { type: String, required: true },\n        category: { type: String, required: true },\n        monday: { type: String, required: true },\n        tuesday: { type: String, required: true },\n        wednesday: { type: String, required: true },\n        thursday: { type: String, required: true },\n        friday: { type: String, required: true },\n        saturday: { type: String, required: true },\n        sunday: { type: String, required: true },\n    },\n    {\n        timestamps: true,\n        toJSON: {\n            transform: (_, ret): void => {\n                ret.id = ret._id.toString();\n                ret.user_id = ret.user_id.toString();\n                delete ret._id;\n                delete ret.__v;\n            },\n        },\n    },\n);\n\nconst Shop = mongoose.model<ShopDocument, ShopModel>('Shop', ShopSchema);\n\nexport default Shop;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3180ccee57a9fa4a69832201a03be4a1e6228b35","contentHash":"9f28d7e56ee11cd8efa56496261210b7283275c13bf69d582087eb6865efe945"},"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/controllers/user_repository.ts":{"path":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/controllers/user_repository.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":37}},"16":{"start":{"line":16,"column":15},"end":{"line":16,"column":57}},"17":{"start":{"line":19,"column":8},"end":{"line":21,"column":11}},"18":{"start":{"line":20,"column":12},"end":{"line":20,"column":43}},"19":{"start":{"line":24,"column":8},"end":{"line":26,"column":11}},"20":{"start":{"line":25,"column":12},"end":{"line":25,"column":47}},"21":{"start":{"line":29,"column":8},"end":{"line":34,"column":11}},"22":{"start":{"line":30,"column":25},"end":{"line":30,"column":75}},"23":{"start":{"line":31,"column":12},"end":{"line":32,"column":28}},"24":{"start":{"line":32,"column":16},"end":{"line":32,"column":28}},"25":{"start":{"line":33,"column":12},"end":{"line":33,"column":24}},"26":{"start":{"line":37,"column":8},"end":{"line":40,"column":11}},"27":{"start":{"line":38,"column":25},"end":{"line":38,"column":52}},"28":{"start":{"line":39,"column":12},"end":{"line":39,"column":31}},"29":{"start":{"line":43,"column":8},"end":{"line":49,"column":11}},"30":{"start":{"line":45,"column":27},"end":{"line":47,"column":14}},"31":{"start":{"line":48,"column":12},"end":{"line":48,"column":35}},"32":{"start":{"line":52,"column":8},"end":{"line":55,"column":11}},"33":{"start":{"line":53,"column":27},"end":{"line":53,"column":69}},"34":{"start":{"line":54,"column":12},"end":{"line":54,"column":35}},"35":{"start":{"line":58,"column":0},"end":{"line":58,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":18,"column":4},"end":{"line":18,"column":5}},"loc":{"start":{"line":18,"column":14},"end":{"line":22,"column":5}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":19,"column":47},"end":{"line":19,"column":48}},"loc":{"start":{"line":19,"column":60},"end":{"line":21,"column":9}},"line":19},"10":{"name":"(anonymous_10)","decl":{"start":{"line":23,"column":4},"end":{"line":23,"column":5}},"loc":{"start":{"line":23,"column":17},"end":{"line":27,"column":5}},"line":23},"11":{"name":"(anonymous_11)","decl":{"start":{"line":24,"column":47},"end":{"line":24,"column":48}},"loc":{"start":{"line":24,"column":60},"end":{"line":26,"column":9}},"line":24},"12":{"name":"(anonymous_12)","decl":{"start":{"line":28,"column":4},"end":{"line":28,"column":5}},"loc":{"start":{"line":28,"column":27},"end":{"line":35,"column":5}},"line":28},"13":{"name":"(anonymous_13)","decl":{"start":{"line":29,"column":47},"end":{"line":29,"column":48}},"loc":{"start":{"line":29,"column":60},"end":{"line":34,"column":9}},"line":29},"14":{"name":"(anonymous_14)","decl":{"start":{"line":36,"column":4},"end":{"line":36,"column":5}},"loc":{"start":{"line":36,"column":20},"end":{"line":41,"column":5}},"line":36},"15":{"name":"(anonymous_15)","decl":{"start":{"line":37,"column":47},"end":{"line":37,"column":48}},"loc":{"start":{"line":37,"column":60},"end":{"line":40,"column":9}},"line":37},"16":{"name":"(anonymous_16)","decl":{"start":{"line":42,"column":4},"end":{"line":42,"column":5}},"loc":{"start":{"line":42,"column":28},"end":{"line":50,"column":5}},"line":42},"17":{"name":"(anonymous_17)","decl":{"start":{"line":43,"column":47},"end":{"line":43,"column":48}},"loc":{"start":{"line":43,"column":60},"end":{"line":49,"column":9}},"line":43},"18":{"name":"(anonymous_18)","decl":{"start":{"line":51,"column":4},"end":{"line":51,"column":5}},"loc":{"start":{"line":51,"column":19},"end":{"line":56,"column":5}},"line":51},"19":{"name":"(anonymous_19)","decl":{"start":{"line":52,"column":47},"end":{"line":52,"column":48}},"loc":{"start":{"line":52,"column":60},"end":{"line":55,"column":9}},"line":52}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":31,"column":12},"end":{"line":32,"column":28}},"type":"if","locations":[{"start":{"line":31,"column":12},"end":{"line":32,"column":28}},{"start":{"line":31,"column":12},"end":{"line":32,"column":28}}],"line":31}},"s":{"0":1,"1":0,"2":0,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":1,"28":1,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1},"f":{"0":1,"1":0,"2":0,"3":1,"4":0,"5":0,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1,"15":1,"16":0,"17":0,"18":0,"19":0},"b":{"0":[1,1,1],"1":[0,0],"2":[1,1],"3":[1,0],"4":[1,1],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/controllers/user_repository.ts","sources":["/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/controllers/user_repository.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAQA,0DAAuC;AAWvC,MAAa,mBAAmB;IACtB,OAAO;;YACT,OAAO,cAAS,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAC9B,CAAC;KAAA;IAEK,QAAQ,CAAC,EAAU;;YACrB,OAAO,cAAS,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAClC,CAAC;KAAA;IAEK,aAAa,CAAC,OAAe;;YAC/B,MAAM,IAAI,GAAG,MAAM,cAAS,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;YAC3D,IAAI,IAAI,KAAK,IAAI;gBAAE,OAAO,IAAI,CAAC;YAC/B,OAAO,IAAI,CAAC;QAChB,CAAC;KAAA;IAEK,MAAM,CAAC,OAA0B;;YACnC,MAAM,IAAI,GAAG,IAAI,cAAS,CAAC,OAAO,CAAC,CAAC;YACpC,OAAO,IAAI,CAAC,IAAI,EAAE,CAAC;QACvB,CAAC;KAAA;IAEK,UAAU,CAAC,EAAU,EAAE,OAA0B;;YACnD,yCAAyC;YACzC,MAAM,MAAM,GAAG,MAAM,cAAS,CAAC,iBAAiB,CAAC,EAAE,EAAE,OAAO,EAAE;gBAC1D,GAAG,EAAE,IAAI;aACZ,CAAC,CAAC;YACH,OAAO,MAAM,KAAK,IAAI,CAAC;QAC3B,CAAC;KAAA;IAEK,UAAU,CAAC,EAAU;;YACvB,MAAM,MAAM,GAAG,MAAM,cAAS,CAAC,iBAAiB,CAAC,EAAE,CAAC,CAAC;YACrD,OAAO,MAAM,KAAK,IAAI,CAAC;QAC3B,CAAC;KAAA;CACJ;AAhCD,kDAgCC","sourcesContent":["import type {\n    CreateUserPayload,\n    GetUserResponse,\n    GetUsersResponse,\n    UpdateUserPayload,\n    UserData,\n} from '@lib/shared_types';\n\nimport UserModel from '../models/user';\n\ninterface IUserRepository {\n    findAll(): Promise<GetUsersResponse>;\n    findById(id: string): Promise<GetUserResponse | null>;\n    findByAccount(name: string): Promise<UserData | null>;\n    create(payload: CreateUserPayload): Promise<Pick<UserData, 'id'>>;\n    updateById(id: string, payload: UpdateUserPayload): Promise<boolean>;\n    deleteById(id: string): Promise<boolean>;\n}\n\nexport class MongoUserRepository implements IUserRepository {\n    async findAll(): Promise<GetUsersResponse> {\n        return UserModel.find({});\n    }\n\n    async findById(id: string): Promise<GetUserResponse | null> {\n        return UserModel.findById(id);\n    }\n\n    async findByAccount(account: string): Promise<UserData | null> {\n        const user = await UserModel.findOne({ account: account });\n        if (user === null) return null;\n        return user;\n    }\n\n    async create(payload: CreateUserPayload): Promise<Pick<UserData, 'id'>> {\n        const user = new UserModel(payload);\n        return user.save();\n    }\n\n    async updateById(id: string, payload: UpdateUserPayload): Promise<boolean> {\n        // mongoose would ignore undefined values\n        const result = await UserModel.findByIdAndUpdate(id, payload, {\n            new: true,\n        });\n        return result !== null;\n    }\n\n    async deleteById(id: string): Promise<boolean> {\n        const result = await UserModel.findByIdAndDelete(id);\n        return result !== null;\n    }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7955b534f26b1db5e7fa06ee08393a4261709306","contentHash":"6962224f7efab7f4c483db405af559f9162b0b597399740326dda8e731a04bc8"},"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/models/user.ts":{"path":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/models/user.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":19},"end":{"line":6,"column":55}},"4":{"start":{"line":7,"column":19},"end":{"line":27,"column":2}},"5":{"start":{"line":22,"column":12},"end":{"line":22,"column":40}},"6":{"start":{"line":23,"column":12},"end":{"line":23,"column":27}},"7":{"start":{"line":24,"column":12},"end":{"line":24,"column":27}},"8":{"start":{"line":28,"column":13},"end":{"line":28,"column":57}},"9":{"start":{"line":29,"column":0},"end":{"line":29,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":21,"column":19},"end":{"line":21,"column":20}},"loc":{"start":{"line":21,"column":31},"end":{"line":25,"column":9}},"line":21}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":1,"9":1},"f":{"0":1,"1":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/models/user.ts","sources":["/Users/vvn/Desktop/ntuim/112-1/雲原生應用程式開發/sushi-restaurant/backend/src/models/user.ts"],"names":[],"mappings":";;;;;AACA,wDAAgC;AAShC,MAAM,UAAU,GAAG,IAAI,kBAAQ,CAAC,MAAM,CAClC;IACI,OAAO,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACzC,QAAQ,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC1C,QAAQ,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC1C,KAAK,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACvC,KAAK,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACvC,IAAI,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACtC,QAAQ,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC1C,QAAQ,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC3C,UAAU,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC5C,UAAU,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;CAC/C,EACD;IACI,oBAAoB;IACpB,MAAM,EAAE;QACJ,SAAS,EAAE,CAAC,CAAC,EAAE,GAAG,EAAQ,EAAE;YACxB,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;YAC5B,OAAO,GAAG,CAAC,GAAG,CAAC;YACf,OAAO,GAAG,CAAC,GAAG,CAAC;QACnB,CAAC;KACJ;CACJ,CACJ,CAAC;AAEF,MAAM,IAAI,GAAG,kBAAQ,CAAC,KAAK,CAA0B,MAAM,EAAE,UAAU,CAAC,CAAC;AAEzE,kBAAe,IAAI,CAAC","sourcesContent":["import type { UserData } from '@lib/shared_types';\nimport mongoose from 'mongoose';\nimport type { Types } from 'mongoose';\n\ninterface UserDocument extends Omit<UserData, 'id'>, mongoose.Document {\n    id: Types.ObjectId;\n}\n\ninterface UserModel extends mongoose.Model<UserDocument> {}\n\nconst UserSchema = new mongoose.Schema<UserDocument>(\n    {\n        account: { type: String, required: true },\n        password: { type: String, required: true },\n        username: { type: String, required: true },\n        email: { type: String, required: true },\n        phone: { type: String, required: true },\n        role: { type: String, required: true },\n        birthday: { type: String, required: true },\n        verified: { type: Boolean, required: true },\n        created_at: { type: String, required: true },\n        last_login: { type: String, required: true },\n    },\n    {\n        // timestamps: true,\n        toJSON: {\n            transform: (_, ret): void => {\n                ret.id = ret._id.toString();\n                delete ret._id;\n                delete ret.__v;\n            },\n        },\n    },\n);\n\nconst User = mongoose.model<UserDocument, UserModel>('User', UserSchema);\n\nexport default User;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4886ff885699ceba1bff67947b866c669856a5db","contentHash":"122df22f3e4a798151eb7595f3df0a315bb71b719c72ff86896f7ff455be9960"}}